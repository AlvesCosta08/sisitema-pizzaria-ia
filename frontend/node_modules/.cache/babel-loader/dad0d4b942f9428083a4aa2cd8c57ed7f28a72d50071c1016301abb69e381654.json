{"ast":null,"code":"const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api'; // Use a URL do seu backend\n\nexport const recomendarPizza = async clienteId => {\n  const url = clienteId ? `${API_BASE_URL}/recomendar?cliente_id=${clienteId}` : `${API_BASE_URL}/recomendar`;\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(`Erro na API: ${res.status}`);\n  return res.json();\n};\n\n// --- ATUALIZAÇÃO: Tipo para dados do cliente ---\n\n// --- ATUALIZAÇÃO: Tipo para dados do pedido ---\n\n// --- ATUALIZAÇÃO: Tipo para resposta do pedido ---\n\n// --- ATUALIZAÇÃO: Função salvarPedido ---\nexport const salvarPedido = async pedido => {\n  const res = await fetch(`${API_BASE_URL}/pedido`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(pedido) // Envia cliente_id, pizza, extras, nome_cliente, telefone_cliente\n  });\n  if (!res.ok) throw new Error(`Erro na API: ${res.status}`);\n  return res.json();\n};\n\n// --- NOVO: Função para buscar pedidos ---\n// --- ATUALIZAÇÃO: Tipo para um pedido retornado pela API ---\n\n// --- NOVA FUNÇÃO ---\nexport const getPedidos = async () => {\n  const res = await fetch(`${API_BASE_URL}/pedidos`); // Nova rota no backend\n  if (!res.ok) {\n    throw new Error(`Erro na API ao buscar pedidos: ${res.status}`);\n  }\n  return res.json();\n};\n\n// --- NOVAS FUNÇÕES: Excluir e Atualizar Pedido ---\n\n// --- Função para excluir um pedido ---\nexport const excluirPedido = async id => {\n  const res = await fetch(`${API_BASE_URL}/pedido/${id}`, {\n    // Supondo que a rota seja /api/pedido/{id}\n    method: 'DELETE'\n  });\n  if (!res.ok) {\n    const errorDetails = await res.text(); // Pega detalhes do erro se houver\n    throw new Error(`Erro na API ao excluir pedido: ${res.status} - ${errorDetails}`);\n  }\n  // DELETE geralmente não retorna conteúdo\n};\n\n// --- Função para atualizar um pedido ---\n// Tipo para os dados que podem ser atualizados (opcional)\n\nexport const atualizarPedido = async (id, dadosAtualizados) => {\n  const res = await fetch(`${API_BASE_URL}/pedido/${id}`, {\n    // Supondo que a rota seja /api/pedido/{id}\n    method: 'PUT',\n    // ou PATCH, dependendo da implementação do backend\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(dadosAtualizados)\n  });\n  if (!res.ok) {\n    const errorDetails = await res.text();\n    throw new Error(`Erro na API ao atualizar pedido: ${res.status} - ${errorDetails}`);\n  }\n  return res.json(); // Retorna o pedido atualizado\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","recomendarPizza","clienteId","url","res","fetch","ok","Error","status","json","salvarPedido","pedido","method","headers","body","JSON","stringify","getPedidos","excluirPedido","id","errorDetails","text","atualizarPedido","dadosAtualizados"],"sources":["/home/codigoquatro/Documentos/pizzaria-ia/frontend/src/services/api.ts"],"sourcesContent":["const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api'; // Use a URL do seu backend\n\nexport const recomendarPizza = async (clienteId?: number) => {\n  const url = clienteId\n    ? `${API_BASE_URL}/recomendar?cliente_id=${clienteId}`\n    : `${API_BASE_URL}/recomendar`;\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(`Erro na API: ${res.status}`);\n  return res.json();\n};\n\n// --- ATUALIZAÇÃO: Tipo para dados do cliente ---\ninterface ClienteInfo {\n  nome_cliente: string;\n  telefone_cliente: string;\n}\n\n// --- ATUALIZAÇÃO: Tipo para dados do pedido ---\ninterface PedidoData extends ClienteInfo {\n  cliente_id: number;\n  pizza: string;\n  extras?: string[];\n}\n\n// --- ATUALIZAÇÃO: Tipo para resposta do pedido ---\ninterface PedidoResponse {\n  sucesso: boolean;\n  mensagem?: string;\n  erro?: string;\n}\n\n// --- ATUALIZAÇÃO: Função salvarPedido ---\nexport const salvarPedido = async (pedido: PedidoData): Promise<PedidoResponse> => {\n  const res = await fetch(`${API_BASE_URL}/pedido`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(pedido), // Envia cliente_id, pizza, extras, nome_cliente, telefone_cliente\n  });\n  if (!res.ok) throw new Error(`Erro na API: ${res.status}`);\n  return res.json();\n};\n\n// --- NOVO: Função para buscar pedidos ---\n// --- ATUALIZAÇÃO: Tipo para um pedido retornado pela API ---\ninterface PedidoRetornado {\n  id: number;\n  cliente_id: number;\n  nome_cliente: string; // Esperado do backend\n  telefone_cliente: string; // Esperado do backend\n  data_hora: string; // Ex: \"2025-11-22 19:30:00\"\n  pizza: string;\n  ingredientes: string;\n  valor: number;\n}\n\n// --- NOVA FUNÇÃO ---\nexport const getPedidos = async (): Promise<PedidoRetornado[]> => {\n  const res = await fetch(`${API_BASE_URL}/pedidos`); // Nova rota no backend\n  if (!res.ok) {\n    throw new Error(`Erro na API ao buscar pedidos: ${res.status}`);\n  }\n  return res.json();\n};\n\n// --- NOVAS FUNÇÕES: Excluir e Atualizar Pedido ---\n\n// --- Função para excluir um pedido ---\nexport const excluirPedido = async (id: number): Promise<void> => {\n  const res = await fetch(`${API_BASE_URL}/pedido/${id}`, { // Supondo que a rota seja /api/pedido/{id}\n    method: 'DELETE',\n  });\n  if (!res.ok) {\n    const errorDetails = await res.text(); // Pega detalhes do erro se houver\n    throw new Error(`Erro na API ao excluir pedido: ${res.status} - ${errorDetails}`);\n  }\n  // DELETE geralmente não retorna conteúdo\n};\n\n// --- Função para atualizar um pedido ---\n// Tipo para os dados que podem ser atualizados (opcional)\ninterface PedidoUpdateData {\n  nome_cliente?: string;\n  telefone_cliente?: string;\n  pizza?: string;\n  ingredientes?: string;\n  valor?: number;\n  // cliente_id normalmente não é alterado\n}\n\nexport const atualizarPedido = async (id: number, dadosAtualizados: PedidoUpdateData): Promise<PedidoRetornado> => {\n  const res = await fetch(`${API_BASE_URL}/pedido/${id}`, { // Supondo que a rota seja /api/pedido/{id}\n    method: 'PUT', // ou PATCH, dependendo da implementação do backend\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(dadosAtualizados),\n  });\n  if (!res.ok) {\n    const errorDetails = await res.text();\n    throw new Error(`Erro na API ao atualizar pedido: ${res.status} - ${errorDetails}`);\n  }\n  return res.json(); // Retorna o pedido atualizado\n};\n\n"],"mappings":"AAAA,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B,CAAC,CAAC;;AAEnF,OAAO,MAAMC,eAAe,GAAG,MAAOC,SAAkB,IAAK;EAC3D,MAAMC,GAAG,GAAGD,SAAS,GACjB,GAAGL,YAAY,0BAA0BK,SAAS,EAAE,GACpD,GAAGL,YAAY,aAAa;EAChC,MAAMO,GAAG,GAAG,MAAMC,KAAK,CAACF,GAAG,CAAC;EAC5B,IAAI,CAACC,GAAG,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,gBAAgBH,GAAG,CAACI,MAAM,EAAE,CAAC;EAC1D,OAAOJ,GAAG,CAACK,IAAI,CAAC,CAAC;AACnB,CAAC;;AAED;;AAMA;;AAOA;;AAOA;AACA,OAAO,MAAMC,YAAY,GAAG,MAAOC,MAAkB,IAA8B;EACjF,MAAMP,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,YAAY,SAAS,EAAE;IAChDe,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,MAAM,CAAC,CAAE;EAChC,CAAC,CAAC;EACF,IAAI,CAACP,GAAG,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,gBAAgBH,GAAG,CAACI,MAAM,EAAE,CAAC;EAC1D,OAAOJ,GAAG,CAACK,IAAI,CAAC,CAAC;AACnB,CAAC;;AAED;AACA;;AAYA;AACA,OAAO,MAAMQ,UAAU,GAAG,MAAAA,CAAA,KAAwC;EAChE,MAAMb,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,YAAY,UAAU,CAAC,CAAC,CAAC;EACpD,IAAI,CAACO,GAAG,CAACE,EAAE,EAAE;IACX,MAAM,IAAIC,KAAK,CAAC,kCAAkCH,GAAG,CAACI,MAAM,EAAE,CAAC;EACjE;EACA,OAAOJ,GAAG,CAACK,IAAI,CAAC,CAAC;AACnB,CAAC;;AAED;;AAEA;AACA,OAAO,MAAMS,aAAa,GAAG,MAAOC,EAAU,IAAoB;EAChE,MAAMf,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,YAAY,WAAWsB,EAAE,EAAE,EAAE;IAAE;IACxDP,MAAM,EAAE;EACV,CAAC,CAAC;EACF,IAAI,CAACR,GAAG,CAACE,EAAE,EAAE;IACX,MAAMc,YAAY,GAAG,MAAMhB,GAAG,CAACiB,IAAI,CAAC,CAAC,CAAC,CAAC;IACvC,MAAM,IAAId,KAAK,CAAC,kCAAkCH,GAAG,CAACI,MAAM,MAAMY,YAAY,EAAE,CAAC;EACnF;EACA;AACF,CAAC;;AAED;AACA;;AAUA,OAAO,MAAME,eAAe,GAAG,MAAAA,CAAOH,EAAU,EAAEI,gBAAkC,KAA+B;EACjH,MAAMnB,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGR,YAAY,WAAWsB,EAAE,EAAE,EAAE;IAAE;IACxDP,MAAM,EAAE,KAAK;IAAE;IACfC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACO,gBAAgB;EACvC,CAAC,CAAC;EACF,IAAI,CAACnB,GAAG,CAACE,EAAE,EAAE;IACX,MAAMc,YAAY,GAAG,MAAMhB,GAAG,CAACiB,IAAI,CAAC,CAAC;IACrC,MAAM,IAAId,KAAK,CAAC,oCAAoCH,GAAG,CAACI,MAAM,MAAMY,YAAY,EAAE,CAAC;EACrF;EACA,OAAOhB,GAAG,CAACK,IAAI,CAAC,CAAC,CAAC,CAAC;AACrB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}