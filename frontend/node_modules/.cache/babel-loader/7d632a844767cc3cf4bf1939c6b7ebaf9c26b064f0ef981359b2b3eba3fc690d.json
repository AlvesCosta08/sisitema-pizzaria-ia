{"ast":null,"code":"const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// Use a URL do seu backend\nexport const recomendarPizza=async clienteId=>{const url=clienteId?\"\".concat(API_BASE_URL,\"/recomendar?cliente_id=\").concat(clienteId):\"\".concat(API_BASE_URL,\"/recomendar\");const res=await fetch(url);if(!res.ok)throw new Error(\"Erro na API: \".concat(res.status));return res.json();};// --- ATUALIZAÇÃO: Tipo para dados do cliente ---\n// --- ATUALIZAÇÃO: Tipo para dados do pedido ---\n// --- ATUALIZAÇÃO: Tipo para resposta do pedido ---\n// --- ATUALIZAÇÃO: Função salvarPedido ---\nexport const salvarPedido=async pedido=>{const res=await fetch(\"\".concat(API_BASE_URL,\"/pedido\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(pedido)// Envia cliente_id, pizza, extras, nome_cliente, telefone_cliente\n});if(!res.ok)throw new Error(\"Erro na API: \".concat(res.status));return res.json();};// --- NOVO: Função para buscar pedidos ---\n// --- ATUALIZAÇÃO: Tipo para um pedido retornado pela API ---\n// --- NOVA FUNÇÃO ---\nexport const getPedidos=async()=>{const res=await fetch(\"\".concat(API_BASE_URL,\"/pedidos\"));// Nova rota no backend\nif(!res.ok){throw new Error(\"Erro na API ao buscar pedidos: \".concat(res.status));}return res.json();};// --- NOVAS FUNÇÕES: Excluir e Atualizar Pedido ---\n// --- Função para excluir um pedido ---\nexport const excluirPedido=async id=>{const res=await fetch(\"\".concat(API_BASE_URL,\"/pedido/\").concat(id),{// Supondo que a rota seja /api/pedido/{id}\nmethod:'DELETE'});if(!res.ok){const errorDetails=await res.text();// Pega detalhes do erro se houver\nthrow new Error(\"Erro na API ao excluir pedido: \".concat(res.status,\" - \").concat(errorDetails));}// DELETE geralmente não retorna conteúdo\n};// --- Função para atualizar um pedido ---\n// Tipo para os dados que podem ser atualizados (opcional)\nexport const atualizarPedido=async(id,dadosAtualizados)=>{const res=await fetch(\"\".concat(API_BASE_URL,\"/pedido/\").concat(id),{// Supondo que a rota seja /api/pedido/{id}\nmethod:'PUT',// ou PATCH, dependendo da implementação do backend\nheaders:{'Content-Type':'application/json'},body:JSON.stringify(dadosAtualizados)});if(!res.ok){const errorDetails=await res.text();throw new Error(\"Erro na API ao atualizar pedido: \".concat(res.status,\" - \").concat(errorDetails));}return res.json();// Retorna o pedido atualizado\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","recomendarPizza","clienteId","url","concat","res","fetch","ok","Error","status","json","salvarPedido","pedido","method","headers","body","JSON","stringify","getPedidos","excluirPedido","id","errorDetails","text","atualizarPedido","dadosAtualizados"],"sources":["/home/codigoquatro/Documentos/pizzaria-ia/frontend/src/services/api.ts"],"sourcesContent":["const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api'; // Use a URL do seu backend\n\nexport const recomendarPizza = async (clienteId?: number) => {\n  const url = clienteId\n    ? `${API_BASE_URL}/recomendar?cliente_id=${clienteId}`\n    : `${API_BASE_URL}/recomendar`;\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(`Erro na API: ${res.status}`);\n  return res.json();\n};\n\n// --- ATUALIZAÇÃO: Tipo para dados do cliente ---\ninterface ClienteInfo {\n  nome_cliente: string;\n  telefone_cliente: string;\n}\n\n// --- ATUALIZAÇÃO: Tipo para dados do pedido ---\ninterface PedidoData extends ClienteInfo {\n  cliente_id: number;\n  pizza: string;\n  extras?: string[];\n}\n\n// --- ATUALIZAÇÃO: Tipo para resposta do pedido ---\ninterface PedidoResponse {\n  sucesso: boolean;\n  mensagem?: string;\n  erro?: string;\n}\n\n// --- ATUALIZAÇÃO: Função salvarPedido ---\nexport const salvarPedido = async (pedido: PedidoData): Promise<PedidoResponse> => {\n  const res = await fetch(`${API_BASE_URL}/pedido`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(pedido), // Envia cliente_id, pizza, extras, nome_cliente, telefone_cliente\n  });\n  if (!res.ok) throw new Error(`Erro na API: ${res.status}`);\n  return res.json();\n};\n\n// --- NOVO: Função para buscar pedidos ---\n// --- ATUALIZAÇÃO: Tipo para um pedido retornado pela API ---\ninterface PedidoRetornado {\n  id: number;\n  cliente_id: number;\n  nome_cliente: string; // Esperado do backend\n  telefone_cliente: string; // Esperado do backend\n  data_hora: string; // Ex: \"2025-11-22 19:30:00\"\n  pizza: string;\n  ingredientes: string;\n  valor: number;\n}\n\n// --- NOVA FUNÇÃO ---\nexport const getPedidos = async (): Promise<PedidoRetornado[]> => {\n  const res = await fetch(`${API_BASE_URL}/pedidos`); // Nova rota no backend\n  if (!res.ok) {\n    throw new Error(`Erro na API ao buscar pedidos: ${res.status}`);\n  }\n  return res.json();\n};\n\n// --- NOVAS FUNÇÕES: Excluir e Atualizar Pedido ---\n\n// --- Função para excluir um pedido ---\nexport const excluirPedido = async (id: number): Promise<void> => {\n  const res = await fetch(`${API_BASE_URL}/pedido/${id}`, { // Supondo que a rota seja /api/pedido/{id}\n    method: 'DELETE',\n  });\n  if (!res.ok) {\n    const errorDetails = await res.text(); // Pega detalhes do erro se houver\n    throw new Error(`Erro na API ao excluir pedido: ${res.status} - ${errorDetails}`);\n  }\n  // DELETE geralmente não retorna conteúdo\n};\n\n// --- Função para atualizar um pedido ---\n// Tipo para os dados que podem ser atualizados (opcional)\ninterface PedidoUpdateData {\n  nome_cliente?: string;\n  telefone_cliente?: string;\n  pizza?: string;\n  ingredientes?: string;\n  valor?: number;\n  // cliente_id normalmente não é alterado\n}\n\nexport const atualizarPedido = async (id: number, dadosAtualizados: PedidoUpdateData): Promise<PedidoRetornado> => {\n  const res = await fetch(`${API_BASE_URL}/pedido/${id}`, { // Supondo que a rota seja /api/pedido/{id}\n    method: 'PUT', // ou PATCH, dependendo da implementação do backend\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(dadosAtualizados),\n  });\n  if (!res.ok) {\n    const errorDetails = await res.text();\n    throw new Error(`Erro na API ao atualizar pedido: ${res.status} - ${errorDetails}`);\n  }\n  return res.json(); // Retorna o pedido atualizado\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}