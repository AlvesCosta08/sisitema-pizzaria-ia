{"ast":null,"code":"import _objectSpread from\"/home/codigoquatro/Documentos/pizzaria-ia/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{recomendarPizza,salvarPedido}from'../services/api';import{CARDAPIO,EXTRAS}from'../cardapio-data';// --- Tipos para mensagens do chat ---\n// --- Tipos para o Carrinho ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";// --- Constante para o n√∫mero de atendimento ---\nconst NUMERO_ATENDIMENTO='5585999999999';// Substitua pelo n√∫mero real da pizzaria/atendente\nconst PizzaRecommender=()=>{// --- Estados para dados do cliente ---\nconst[clienteInfo,setClienteInfo]=useState({nome:'',telefone:'',endereco:''});const[showClienteForm,setShowClienteForm]=useState(true);// --- Estados para chat e fluxo ---\nconst[messages,setMessages]=useState([]);const[inputText,setInputText]=useState('');const[loading,setLoading]=useState(false);const[pedidoStatus,setPedidoStatus]=useState(null);// --- Estados para o Carrinho ---\nconst[carrinho,setCarrinho]=useState([]);const[showCarrinho,setShowCarrinho]=useState(false);// Mostra/oculta a se√ß√£o do carrinho\n// --- Estados para Adicionar ao Carrinho ---\nconst[pizzaToAdd,setPizzaToAdd]=useState(null);const[extrasSelecionados,setExtrasSelecionados]=useState([]);// --- Ref para auto-scroll ---\nconst messagesEndRef=useRef(null);// --- Rola para a √∫ltima mensagem ---\nconst scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};useEffect(()=>{// Mensagem de boas-vindas inicial\nsetMessages([{id:1,text:\"üçï Ol√°! Bem-vindo √† Pizzaria IA! Sou seu assistente virtual. Vamos come√ßar com seu cadastro.\",type:'bot',timestamp:new Date()}]);scrollToBottom();},[]);useEffect(()=>{scrollToBottom();},[messages]);// --- Calcula total do carrinho ---\nconst totalCarrinho=carrinho.reduce((sum,item)=>sum+item.precoTotal,0);// --- Simula envio de status do pedido ---\nconst simularStatusPedido=id=>{const status=[\"Pedido #\".concat(id,\" confirmado e em prepara\\xE7\\xE3o.\"),\"Pedido #\".concat(id,\" saindo para entrega.\"),\"Pedido #\".concat(id,\" entregue! Aproveite!\")];let i=0;const interval=setInterval(()=>{if(i<status.length){setMessages(prev=>[...prev,{id:Date.now()+i,text:status[i],type:'pedido',timestamp:new Date()}]);i++;}else{clearInterval(interval);}},5000);// Atualiza a cada 5 segundos\n};// --- Fun√ß√£o para lidar com a√ß√µes de bot√µes ---\nconst handleOptionClick=async action=>{setLoading(true);const userMessage={id:Date.now(),text:action,type:'user',timestamp:new Date()};setMessages(prev=>[...prev,userMessage]);let botResponse=\"\";if(action==='ver_cardapio'){botResponse=\"Claro! Aqui est√° nosso card√°pio. Clique em 'Adicionar ao Carrinho' para escolher uma pizza.\\n\\n\";const cardapioMessages=Object.entries(CARDAPIO).map((_ref,index)=>{let[nome,info]=_ref;return{id:Date.now()+index,type:'cardapio',timestamp:new Date(),pizza:{nome:nome,ingredientes:info.ingredientes,preco:info.preco},options:[{text:\"Adicionar ao Carrinho\",action:\"adicionar_\".concat(nome)}]// Bot√£o para adicionar\n};});setMessages(prev=>[...prev,{id:Date.now()+1000,text:botResponse,type:'bot',timestamp:new Date()},...cardapioMessages]);botResponse=\"\";// N√£o adicionar mensagem de texto novamente\n}else if(action==='recomendar'){try{const resp=await recomendarPizza(1);// Usando ID gen√©rico para recomenda√ß√£o\nif(!resp.erro){botResponse=\"Recomendo a pizza de **\".concat(resp.pizza_recomendada,\"**!\\nMotivo: \").concat(resp.motivo,\"\\nIngredientes: \").concat(resp.ingredientes.join(', '),\".\");// Bot√£o para adicionar a pizza recomendada\nsetMessages(prev=>[...prev,{id:Date.now()+1,text:botResponse,type:'bot',timestamp:new Date()},{id:Date.now()+2,type:'action',options:[{text:\"Adicionar ao Carrinho\",action:\"adicionar_\".concat(resp.pizza_recomendada)}],timestamp:new Date()}]);botResponse=\"\";// N√£o adicionar mensagem de texto novamente\n}else{botResponse=\"Erro na recomenda\\xE7\\xE3o: \".concat(resp.detalhe);}}catch(e){botResponse=\"Erro ao se comunicar com o sistema de recomenda√ß√£o.\";}}else if(action.startsWith('adicionar_')){const nomePizza=action.replace('adicionar_','');const infoPizza=CARDAPIO[nomePizza];if(infoPizza){setPizzaToAdd({nome:nomePizza,preco:infoPizza.preco});setExtrasSelecionados([]);// Limpa extras anteriores\n}else{botResponse=\"Erro: Pizza n√£o encontrada.\";}}else if(action==='ver_carrinho'){setShowCarrinho(true);botResponse=\"\";// O carrinho ser√° exibido separadamente\n}else if(action==='finalizar_pedido'){if(carrinho.length===0){botResponse=\"Seu carrinho est√° vazio. Adicione itens antes de finalizar.\";}else{try{// --- AJUSTE: Itera sobre todos os itens do carrinho ---\nfor(const item of carrinho){// --- CORRE√á√ÉO: Inclui nome_cliente e telefone_cliente ---\nconst pedidoIndividual={cliente_id:clienteInfo.id||1,// Usar ID real do cliente quando dispon√≠vel\nnome_cliente:clienteInfo.nome,// <-- ADICIONADO\ntelefone_cliente:clienteInfo.telefone,// <-- ADICIONADO\npizza:item.nome,extras:item.extras};const resp=await salvarPedido(pedidoIndividual);// <-- Chamada com objeto correto\nif(!resp.sucesso){throw new Error(\"Erro ao confirmar pedido de \".concat(item.nome,\": \").concat(resp.erro));}setMessages(prev=>[...prev,{id:Date.now(),text:\"\\u2705 Pedido de \".concat(item.nome,\" confirmado!\"),type:'info',timestamp:new Date()}]);}botResponse=\"\\u2705 Pedido com \".concat(carrinho.length,\" itens confirmado! Total: R$ \").concat(totalCarrinho.toFixed(2));// Limpa o carrinho\nsetCarrinho([]);setShowCarrinho(false);// --- ADICIONAR ESTA LINHA ---\n// Adiciona mensagem com link do WhatsApp ao chat\nsetMessages(prev=>[...prev,{id:Date.now()+1000,text:\"Clique aqui para confirmar via WhatsApp\",type:'info',timestamp:new Date()}]);// -------------------------\n}catch(e){botResponse=\"Erro ao confirmar pedido: \".concat(e.message||e);}}}else if(action==='ajuda'){botResponse=\"Voc√™ pode me pedir para:\\n- Mostrar o card√°pio\\n- Fazer uma recomenda√ß√£o\\n- Ver ou finalizar seu pedido\\n- Digite o que deseja!\";}if(botResponse){setMessages(prev=>[...prev,{id:Date.now()+1,text:botResponse,type:'bot',timestamp:new Date()}]);}setLoading(false);};// --- Fun√ß√£o para adicionar item ao carrinho ---\nconst handleAdicionarAoCarrinho=()=>{if(pizzaToAdd){const precoExtras=extrasSelecionados.reduce((sum,e)=>sum+(EXTRAS[e]||0),0);const precoTotal=pizzaToAdd.preco+precoExtras;const novoItem={id:Date.now(),// ID √∫nico baseado em timestamp\nnome:pizzaToAdd.nome,precoBase:pizzaToAdd.preco,extras:[...extrasSelecionados],precoTotal:precoTotal};setCarrinho(prev=>[...prev,novoItem]);setPizzaToAdd(null);// Fecha o modal/√°rea de adi√ß√£o\nsetExtrasSelecionados([]);// Limpa extras selecionados\nsetMessages(prev=>[...prev,{id:Date.now(),text:\"\\u2705 \".concat(pizzaToAdd.nome,\" adicionada ao carrinho!\"),type:'info',timestamp:new Date()}]);}};// --- Fun√ß√£o para remover item do carrinho ---\nconst handleRemoverDoCarrinho=id=>{setCarrinho(prev=>prev.filter(item=>item.id!==id));};// --- Fun√ß√£o para lidar com o envio de mensagens ---\nconst handleSendMessage=async()=>{if(!inputText.trim())return;const userMessage={id:Date.now(),text:inputText,type:'user',timestamp:new Date()};setMessages(prev=>[...prev,userMessage]);setInputText('');setLoading(true);// --- L√≥gica de IA Simples ---\nlet botResponse=\"\";const lowerText=inputText.toLowerCase();if(showClienteForm){// Se ainda n√£o coletou info, ignora comandos e pede info\nbotResponse=\"Para continuar, por favor, preencha seu nome, telefone e endere√ßo.\";}else if(lowerText.includes(\"ol√°\")||lowerText.includes(\"oi\")||lowerText.includes(\"bom dia\")||lowerText.includes(\"boa tarde\")||lowerText.includes(\"boa noite\")){botResponse=\"Ol\\xE1 \".concat(clienteInfo.nome,\"! \\uD83D\\uDE0A Como posso te ajudar?\");// Adiciona op√ß√µes de a√ß√£o ap√≥s saudar\nsetMessages(prev=>[...prev,{id:Date.now()+1,text:botResponse,type:'bot',timestamp:new Date()},{id:Date.now()+2,type:'action',options:[{text:\"Ver Card√°pio\",action:'ver_cardapio'},{text:\"Receber Recomenda√ß√£o\",action:'recomendar'},{text:\"Ver Carrinho\",action:'ver_carrinho'},{text:\"Ajuda\",action:'ajuda'}],timestamp:new Date()}]);botResponse=\"\";// N√£o adicionar mensagem de texto novamente\n}else if(lowerText.includes(\"card√°pio\")||lowerText.includes(\"ver card√°pio\")||lowerText.includes(\"op√ß√µes\")||lowerText.includes(\"quais pizzas\")||lowerText.includes(\"o que voc√™s t√™m\")){// Exibe o card√°pio como mensagens separadas com bot√µes\nbotResponse=\"Claro! Aqui est√° nosso card√°pio. Clique em 'Adicionar ao Carrinho' para escolher uma pizza.\\n\\n\";const cardapioMessages=Object.entries(CARDAPIO).map((_ref2,index)=>{let[nome,info]=_ref2;return{id:Date.now()+index,type:'cardapio',timestamp:new Date(),pizza:{nome:nome,ingredientes:info.ingredientes,preco:info.preco},options:[{text:\"Adicionar ao Carrinho\",action:\"adicionar_\".concat(nome)}]// Bot√£o para adicionar\n};});setMessages(prev=>[...prev,{id:Date.now()+1000,text:botResponse,type:'bot',timestamp:new Date()},...cardapioMessages]);botResponse=\"\";// N√£o adicionar mensagem de texto novamente\n}else if(lowerText.includes(\"recomendar\")||lowerText.includes(\"sugira\")||lowerText.includes(\"qual pizza\")){// Chama a API de recomenda√ß√£o\ntry{const resp=await recomendarPizza(1);// Usa ID fixo ou gerado\nif(!resp.erro){botResponse=\"Recomendo a pizza de **\".concat(resp.pizza_recomendada,\"**!\\nMotivo: \").concat(resp.motivo,\"\\nIngredientes: \").concat(resp.ingredientes.join(', '),\".\");// Bot√£o para adicionar a pizza recomendada\nsetMessages(prev=>[...prev,{id:Date.now()+1,text:botResponse,type:'bot',timestamp:new Date()},{id:Date.now()+2,type:'action',options:[{text:\"Adicionar ao Carrinho\",action:\"adicionar_\".concat(resp.pizza_recomendada)}],timestamp:new Date()}]);botResponse=\"\";// N√£o adicionar mensagem de texto novamente\n}else{botResponse=\"Erro na recomenda\\xE7\\xE3o: \".concat(resp.detalhe);}}catch(e){botResponse=\"Erro ao se comunicar com o sistema de recomenda√ß√£o.\";}}else if(lowerText.includes(\"carrinho\")||lowerText.includes(\"ver carrinho\")){setShowCarrinho(true);botResponse=\"\";// O carrinho ser√° exibido separadamente\n}else if(lowerText.includes(\"pedido\")||lowerText.includes(\"status\")){if(pedidoStatus){botResponse=pedidoStatus;}else{botResponse=\"Ainda n√£o h√° um pedido em andamento.\";}}else if(lowerText.includes(\"ajuda\")){botResponse=\"Voc√™ pode me pedir para:\\n- Mostrar o card√°pio\\n- Fazer uma recomenda√ß√£o\\n- Ver ou finalizar seu pedido\\n- Digite o que deseja!\";// Adiciona op√ß√µes de a√ß√£o para facilitar\nsetMessages(prev=>[...prev,{id:Date.now()+1,text:botResponse,type:'bot',timestamp:new Date()},{id:Date.now()+2,type:'action',options:[{text:\"Ver Card√°pio\",action:'ver_cardapio'},{text:\"Receber Recomenda√ß√£o\",action:'recomendar'},{text:\"Ver Carrinho\",action:'ver_carrinho'},{text:\"Ajuda\",action:'ajuda'}],timestamp:new Date()}]);botResponse=\"\";// N√£o adicionar mensagem de texto novamente\n}else{botResponse=\"Desculpe, n√£o entendi. Posso te ajudar com o card√°pio, uma recomenda√ß√£o, informa√ß√µes sobre seu pedido, ou digite 'ajuda' para ver comandos dispon√≠veis.\";// Adiciona op√ß√µes de a√ß√£o para facilitar\nsetMessages(prev=>[...prev,{id:Date.now()+1,text:botResponse,type:'bot',timestamp:new Date()},{id:Date.now()+2,type:'action',options:[{text:\"Ver Card√°pio\",action:'ver_cardapio'},{text:\"Receber Recomenda√ß√£o\",action:'recomendar'},{text:\"Ver Carrinho\",action:'ver_carrinho'},{text:\"Ajuda\",action:'ajuda'}],timestamp:new Date()}]);botResponse=\"\";// N√£o adicionar mensagem de texto novamente\n}if(botResponse){setMessages(prev=>[...prev,{id:Date.now()+1,text:botResponse,type:'bot',timestamp:new Date()}]);}setLoading(false);};// --- Fun√ß√£o para lidar com o envio do formul√°rio de cliente ---\nconst handleClienteSubmit=e=>{e.preventDefault();if(clienteInfo.nome&&clienteInfo.telefone&&clienteInfo.endereco){// Gera um ID de cliente simples (em produ√ß√£o, viria do backend)\nconst novoClienteId=Date.now()%10000;setClienteInfo(prev=>_objectSpread(_objectSpread({},prev),{},{id:novoClienteId}));// <-- Atualiza o estado com o ID\nsetShowClienteForm(false);setMessages(prev=>[...prev,{id:Date.now(),text:\"Obrigado, \".concat(clienteInfo.nome,\"! Seu ID \\xE9 \").concat(novoClienteId,\". Como posso te ajudar agora?\"),type:'bot',timestamp:new Date()},{id:Date.now()+1,type:'action',options:[{text:\"Ver Card√°pio\",action:'ver_cardapio'},{text:\"Receber Recomenda√ß√£o\",action:'recomendar'},{text:\"Ver Carrinho\",action:'ver_carrinho'},{text:\"Ajuda\",action:'ajuda'}],timestamp:new Date()}]);}};return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[showClienteForm&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleClienteSubmit,style:styles.clienteForm,children:[/*#__PURE__*/_jsx(\"h4\",{style:styles.formTitle,children:\"_infos do Cliente\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nome completo\",value:clienteInfo.nome,onChange:e=>setClienteInfo(_objectSpread(_objectSpread({},clienteInfo),{},{nome:e.target.value})),style:styles.input,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"Telefone (ex: 11999999999)\",value:clienteInfo.telefone,onChange:e=>setClienteInfo(_objectSpread(_objectSpread({},clienteInfo),{},{telefone:e.target.value})),style:styles.input,required:true}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Endere\\xE7o completo\",value:clienteInfo.endereco,onChange:e=>setClienteInfo(_objectSpread(_objectSpread({},clienteInfo),{},{endereco:e.target.value})),style:_objectSpread(_objectSpread({},styles.input),{},{minHeight:'60px'}),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:styles.confirmButton,children:\"Enviar\"})]}),!showClienteForm&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.chatArea,children:[messages.map(msg=>/*#__PURE__*/_jsx(ChatMessage,{message:msg,onOptionClick:handleOptionClick,clienteInfo:clienteInfo// Passa o objeto clienteInfo como prop (ainda necess√°rio para a mensagem do WhatsApp)\n// numeroTelefoneCliente={clienteInfo.telefone} // <-- COMENTADO: N√£o √© mais necess√°rio passar o n√∫mero do cliente\n},msg.id)),loading&&/*#__PURE__*/_jsx(\"div\",{style:styles.loading,children:\"Pizzaria IA est\\xE1 digitando...\"}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),showCarrinho&&carrinho.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:styles.carrinhoArea,children:[/*#__PURE__*/_jsx(\"h4\",{style:styles.carrinhoTitulo,children:\"\\uD83D\\uDED2 Seu Carrinho\"}),carrinho.map(item=>/*#__PURE__*/_jsxs(\"div\",{style:styles.itemCarrinho,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.itemInfo,children:[/*#__PURE__*/_jsx(\"strong\",{children:item.nome}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Pre\\xE7o Base: R$ \",item.precoBase.toFixed(2)]}),item.extras.length>0&&/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"br\",{}),\"Extras: \",item.extras.join(', '),\" (+R$ \",item.extras.reduce((sum,e)=>sum+(EXTRAS[e]||0),0).toFixed(2),\")\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"Total: R$ \",item.precoTotal.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoverDoCarrinho(item.id),style:styles.removerButton,children:\"Remover\"})]},item.id)),/*#__PURE__*/_jsx(\"div\",{style:styles.totalCarrinho,children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Total do Pedido: R$ \",totalCarrinho.toFixed(2)]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOptionClick('finalizar_pedido'),style:styles.finalizarButton,children:\"Finalizar Pedido\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCarrinho(false),style:styles.voltarButton,children:\"Continuar Comprando\"})]}),!showCarrinho&&carrinho.length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCarrinho(true),style:styles.verCarrinhoButton,children:[\"Ver Carrinho (\",carrinho.length,\" itens) - R$ \",totalCarrinho.toFixed(2)]}),pizzaToAdd&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.modalContent,children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Adicionar ao Carrinho: \",pizzaToAdd.nome]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Pre\\xE7o Base: R$ \",pizzaToAdd.preco.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Extras (opcional):\"}),Object.entries(EXTRAS).map(_ref3=>{let[extra,preco]=_ref3;return/*#__PURE__*/_jsxs(\"label\",{style:styles.extraLabel,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:extrasSelecionados.includes(extra),onChange:e=>{if(e.target.checked){setExtrasSelecionados(prev=>[...prev,extra]);}else{setExtrasSelecionados(prev=>prev.filter(e=>e!==extra));}}}),\" \",extra,\" (+R$ \",preco.toFixed(2),\")\"]},extra);})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalButtons,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPizzaToAdd(null),style:styles.cancelarButton,children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAdicionarAoCarrinho,style:styles.adicionarButton,children:[\"Adicionar (R$ $\",(pizzaToAdd.preco+extrasSelecionados.reduce((sum,e)=>sum+(EXTRAS[e]||0),0)).toFixed(2),\")\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:styles.inputArea,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputText,onChange:e=>setInputText(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSendMessage(),placeholder:\"Digite sua mensagem...\",style:styles.input}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,style:styles.sendButton,children:\"Enviar\"})]})]})]});};// --- Componente para exibir uma mensagem no chat ---\nconst ChatMessage=_ref4=>{let{message,onOptionClick,clienteInfo}=_ref4;// <-- Adicionado clienteInfo √†s props e desestruturado\nconst isUser=message.type==='user';const isPedido=message.type==='pedido';const isBot=message.type==='bot';const isInfo=message.type==='info';const isCardapio=message.type==='cardapio';const isAction=message.type==='action';let bgColor='#f1f1f1';let align='flex-start';let fontWeight='normal';if(isUser){bgColor='#d32f2f';align='flex-end';}else if(isPedido){bgColor='#4caf50';fontWeight='bold';}else if(isInfo){bgColor='#2196f3';fontWeight='bold';}else if(isBot){bgColor='#e0e0e0';}else if(isCardapio){bgColor='#fff3e0';// Cor suave para itens do card√°pio\nfontWeight='normal';}else if(isAction){bgColor='transparent';// Bot√µes de a√ß√£o\nfontWeight='bold';}// --- Fun√ß√£o para lidar com o clique no link do WhatsApp ---\nconst handleCliqueWhatsApp=numeroTelefone=>{// Reaproveita a fun√ß√£o definida em PizzaRecommender ou move para um utilit√°rio\n// Por simplicidade, redefinimos aqui.\nconst numeroLimpo=numeroTelefone.replace(/\\D/g,'');let numeroFormatado=numeroLimpo;if(numeroLimpo.length===10){numeroFormatado='55'+numeroLimpo.substring(0,2)+'9'+numeroLimpo.substring(2);}else if(numeroLimpo.length===11){numeroFormatado='55'+numeroLimpo;}else{console.error(\"N√∫mero de telefone inv√°lido ou incompleto para formato internacional.\",numeroLimpo);// Opcional: Adicionar mensagem de erro ao chat aqui tamb√©m\nreturn;}// --- Agora 'clienteInfo' est√° dispon√≠vel no escopo ---\nconst mensagem=\"Ol\\xE1 \".concat(encodeURIComponent(clienteInfo.nome),\", seu pedido est\\xE1 pronto! Por favor, confirme o recebimento ou avise se precisa cancelar.\\n\\n1. Confirmar Recebimento\\n2. Cancelar Pedido\\n\\nDigite \\\"CONFIRMAR\\\" ou \\\"CANCELAR\\\".\");// ---\nconst mensagemCodificada=encodeURIComponent(mensagem);const link=\"https://wa.me/\".concat(numeroFormatado,\"?text=\").concat(mensagemCodificada);if(link){window.open(link,'_blank');}};if(isCardapio&&message.pizza){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:align,marginBottom:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px 12px',borderRadius:'12px',backgroundColor:bgColor,color:'black',maxWidth:'80%',wordWrap:'break-word',fontWeight:fontWeight},children:[/*#__PURE__*/_jsx(\"strong\",{children:message.pizza.nome}),\" - R$ \",message.pizza.preco.toFixed(2),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:message.pizza.ingredientes}),message.options&&message.options.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'4px'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>onOptionClick(message.options[0].action),style:{padding:'4px 8px',borderRadius:'8px',border:'1px solid #d32f2f',backgroundColor:'white',color:'#d32f2f',cursor:'pointer',fontSize:'12px',marginTop:'4px'},children:message.options[0].text})})]})});}if(isAction&&message.options){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',gap:'8px',marginBottom:'8px',flexWrap:'wrap'},children:message.options.map((opt,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>onOptionClick(opt.action),style:{padding:'6px 12px',borderRadius:'20px',border:'1px solid #d32f2f',backgroundColor:'white',color:'#d32f2f',cursor:'pointer',fontSize:'14px'},children:opt.text},index))});}// --- L√≥gica para renderizar mensagem com bot√£o do WhatsApp ---\nlet conteudoMensagem=message.text;// <-- Corre√ß√£o: Defina o tipo como React.ReactNode\nif(isInfo&&message.text===\"Clique aqui para confirmar via WhatsApp\"){conteudoMensagem=/*#__PURE__*/// <-- Agora √© poss√≠vel atribuir um Element JSX\n_jsx(\"button\",{onClick:()=>handleCliqueWhatsApp(NUMERO_ATENDIMENTO)// <-- Chama a fun√ß√£o ajustada (usa constante)\n,style:{padding:'6px 12px',borderRadius:'8px',border:'1px solid #25D366',backgroundColor:'#25D366',color:'white',cursor:'pointer',fontSize:'14px',fontWeight:'normal'},children:\"\\uD83D\\uDCF2 Confirmar via WhatsApp\"});}return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:align,marginBottom:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px 12px',borderRadius:'12px',backgroundColor:bgColor,color:isUser?'white':'black',maxWidth:'80%',wordWrap:'break-word',fontWeight:fontWeight},children:[conteudoMensagem,\" \"]})});};// --- Estilos CSS em JS ---\nconst styles={container:{fontFamily:'Arial, sans-serif',padding:'16px',maxWidth:'400px',margin:'0 auto',display:'flex',flexDirection:'column',height:'70vh',backgroundColor:'#fff',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0,0,0,0.1)',position:'relative'// Para o modal\n},clienteForm:{display:'flex',flexDirection:'column',gap:'8px'},formTitle:{margin:'0 0 16px 0',color:'#333',fontSize:'18px',fontWeight:'bold'},chatArea:{flex:1,overflowY:'auto',padding:'8px',marginBottom:'8px',backgroundColor:'#fafafa',borderRadius:'8px',border:'1px solid #eee'},carrinhoArea:{padding:'12px',backgroundColor:'#f9f9f9',borderRadius:'8px',border:'1px solid #ddd',marginBottom:'8px',maxHeight:'200px',overflowY:'auto'},carrinhoTitulo:{margin:'0 0 8px 0',fontSize:'16px',fontWeight:'bold',color:'#333'},itemCarrinho:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'6px 0',borderBottom:'1px solid #eee'},itemInfo:{flex:1,fontSize:'14px'},removerButton:{padding:'4px 8px',backgroundColor:'#f44336',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'12px'},totalCarrinho:{textAlign:'right',padding:'8px 0',fontWeight:'bold',borderTop:'1px solid #ddd',marginTop:'8px'},finalizarButton:{width:'100%',padding:'10px',backgroundColor:'#4caf50',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'bold',marginTop:'8px'},voltarButton:{width:'100%',padding:'8px',backgroundColor:'#e0e0e0',color:'black',border:'none',borderRadius:'8px',cursor:'pointer',marginTop:'4px'},verCarrinhoButton:{width:'100%',padding:'8px',backgroundColor:'#ff9800',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'bold',marginBottom:'8px'},modalOverlay:{position:'absolute',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:10},modalContent:{backgroundColor:'white',padding:'16px',borderRadius:'8px',width:'90%',maxWidth:'400px'},extraLabel:{display:'block',marginBottom:'4px'},modalButtons:{display:'flex',justifyContent:'space-between',marginTop:'12px'},cancelarButton:{padding:'8px 16px',backgroundColor:'#e0e0e0',color:'black',border:'none',borderRadius:'4px',cursor:'pointer'},adicionarButton:{padding:'8px 16px',backgroundColor:'#4caf50',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},inputArea:{display:'flex',gap:'8px'},input:{flex:1,padding:'10px',borderRadius:'8px',border:'1px solid #ccc',fontSize:'16px'},confirmButton:{padding:'10px',background:'#4caf50',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',cursor:'pointer'},sendButton:{padding:'10px 15px',background:'#d32f2f',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',cursor:'pointer'},loading:{textAlign:'center',padding:'8px',color:'#666',fontStyle:'italic'}};export default PizzaRecommender;","map":{"version":3,"names":["React","useState","useEffect","useRef","recomendarPizza","salvarPedido","CARDAPIO","EXTRAS","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NUMERO_ATENDIMENTO","PizzaRecommender","clienteInfo","setClienteInfo","nome","telefone","endereco","showClienteForm","setShowClienteForm","messages","setMessages","inputText","setInputText","loading","setLoading","pedidoStatus","setPedidoStatus","carrinho","setCarrinho","showCarrinho","setShowCarrinho","pizzaToAdd","setPizzaToAdd","extrasSelecionados","setExtrasSelecionados","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","id","text","type","timestamp","Date","totalCarrinho","reduce","sum","item","precoTotal","simularStatusPedido","status","concat","i","interval","setInterval","length","prev","now","clearInterval","handleOptionClick","action","userMessage","botResponse","cardapioMessages","Object","entries","map","_ref","index","info","pizza","ingredientes","preco","options","resp","erro","pizza_recomendada","motivo","join","detalhe","e","startsWith","nomePizza","replace","infoPizza","pedidoIndividual","cliente_id","nome_cliente","telefone_cliente","extras","sucesso","Error","toFixed","message","handleAdicionarAoCarrinho","precoExtras","novoItem","precoBase","handleRemoverDoCarrinho","filter","handleSendMessage","trim","lowerText","toLowerCase","includes","_ref2","handleClienteSubmit","preventDefault","novoClienteId","_objectSpread","style","styles","container","children","onSubmit","clienteForm","formTitle","placeholder","value","onChange","target","input","required","minHeight","confirmButton","chatArea","msg","ChatMessage","onOptionClick","ref","carrinhoArea","carrinhoTitulo","itemCarrinho","itemInfo","onClick","removerButton","finalizarButton","voltarButton","verCarrinhoButton","modalOverlay","modalContent","_ref3","extra","extraLabel","checked","modalButtons","cancelarButton","adicionarButton","inputArea","onKeyPress","key","sendButton","_ref4","isUser","isPedido","isBot","isInfo","isCardapio","isAction","bgColor","align","fontWeight","handleCliqueWhatsApp","numeroTelefone","numeroLimpo","numeroFormatado","substring","console","error","mensagem","encodeURIComponent","mensagemCodificada","link","window","open","display","justifyContent","marginBottom","padding","borderRadius","backgroundColor","color","maxWidth","wordWrap","marginTop","border","cursor","fontSize","gap","flexWrap","opt","conteudoMensagem","fontFamily","margin","flexDirection","height","boxShadow","position","flex","overflowY","maxHeight","alignItems","borderBottom","textAlign","borderTop","width","top","left","right","bottom","zIndex","background","fontStyle"],"sources":["/home/codigoquatro/Documentos/pizzaria-ia/frontend/src/components/PizzaRecommender.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { recomendarPizza, salvarPedido } from '../services/api';\nimport { CARDAPIO, EXTRAS } from '../cardapio-data';\n\n// --- Tipos para mensagens do chat ---\ntype MessageType = 'info' | 'user' | 'bot' | 'pedido' | 'cardapio' | 'action' | 'form' | 'carrinho';\ninterface Message {\n  id: number;\n  text?: string;\n  type: MessageType;\n  timestamp: Date;\n  pizza?: { nome: string; ingredientes: string; preco: number };\n  formType?: 'pedido' | 'cliente';\n  options?: { text: string; action: string }[]; // Para bot√µes de a√ß√£o\n  carrinho?: CarrinhoItem[]; // Para mensagens de carrinho\n}\n\n// --- Tipos para o Carrinho ---\ninterface CarrinhoItem {\n  id: number; // ID √∫nico para cada item no carrinho (pode ser timestamp)\n  nome: string;\n  precoBase: number;\n  extras: string[];\n  precoTotal: number;\n}\n\n// --- Constante para o n√∫mero de atendimento ---\nconst NUMERO_ATENDIMENTO = '5585999999999'; // Substitua pelo n√∫mero real da pizzaria/atendente\n\nconst PizzaRecommender: React.FC = () => {\n  // --- Estados para dados do cliente ---\n  const [clienteInfo, setClienteInfo] = useState<{\n    id?: number; // Adicionando o campo ID\n    nome: string;\n    telefone: string;\n    endereco: string;\n  }>({\n    nome: '',\n    telefone: '',\n    endereco: '',\n  });\n  const [showClienteForm, setShowClienteForm] = useState(true);\n\n  // --- Estados para chat e fluxo ---\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [inputText, setInputText] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [pedidoStatus, setPedidoStatus] = useState<string | null>(null);\n\n  // --- Estados para o Carrinho ---\n  const [carrinho, setCarrinho] = useState<CarrinhoItem[]>([]);\n  const [showCarrinho, setShowCarrinho] = useState(false); // Mostra/oculta a se√ß√£o do carrinho\n\n  // --- Estados para Adicionar ao Carrinho ---\n  const [pizzaToAdd, setPizzaToAdd] = useState<{ nome: string; preco: number } | null>(null);\n  const [extrasSelecionados, setExtrasSelecionados] = useState<string[]>([]);\n\n  // --- Ref para auto-scroll ---\n  const messagesEndRef = useRef<null | HTMLDivElement>(null);\n\n  // --- Rola para a √∫ltima mensagem ---\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    // Mensagem de boas-vindas inicial\n    setMessages([\n      { id: 1, text: \"üçï Ol√°! Bem-vindo √† Pizzaria IA! Sou seu assistente virtual. Vamos come√ßar com seu cadastro.\", type: 'bot', timestamp: new Date() }\n    ]);\n    scrollToBottom();\n  }, []);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // --- Calcula total do carrinho ---\n  const totalCarrinho = carrinho.reduce((sum, item) => sum + item.precoTotal, 0);\n\n  // --- Simula envio de status do pedido ---\n  const simularStatusPedido = (id: number) => {\n    const status = [\n      `Pedido #${id} confirmado e em prepara√ß√£o.`,\n      `Pedido #${id} saindo para entrega.`,\n      `Pedido #${id} entregue! Aproveite!`\n    ];\n    let i = 0;\n    const interval = setInterval(() => {\n      if (i < status.length) {\n        setMessages(prev => [\n          ...prev,\n          { id: Date.now() + i, text: status[i], type: 'pedido', timestamp: new Date() }\n        ]);\n        i++;\n      } else {\n        clearInterval(interval);\n      }\n    }, 5000); // Atualiza a cada 5 segundos\n  };\n\n  // --- Fun√ß√£o para lidar com a√ß√µes de bot√µes ---\n  const handleOptionClick = async (action: string) => {\n    setLoading(true);\n    const userMessage: Message = { id: Date.now(), text: action, type: 'user', timestamp: new Date() };\n    setMessages(prev => [...prev, userMessage]);\n\n    let botResponse = \"\";\n    if (action === 'ver_cardapio') {\n      botResponse = \"Claro! Aqui est√° nosso card√°pio. Clique em 'Adicionar ao Carrinho' para escolher uma pizza.\\n\\n\";\n      const cardapioMessages: Message[] = Object.entries(CARDAPIO).map(([nome, info], index) => ({\n        id: Date.now() + index,\n        type: 'cardapio',\n        timestamp: new Date(),\n        pizza: {\n          nome: nome,\n          ingredientes: info.ingredientes,\n          preco: info.preco\n        },\n        options: [{ text: \"Adicionar ao Carrinho\", action: `adicionar_${nome}` }] // Bot√£o para adicionar\n      }));\n      setMessages(prev => [...prev, { id: Date.now() + 1000, text: botResponse, type: 'bot', timestamp: new Date() }, ...cardapioMessages]);\n      botResponse = \"\"; // N√£o adicionar mensagem de texto novamente\n    } else if (action === 'recomendar') {\n      try {\n        const resp = await recomendarPizza(1); // Usando ID gen√©rico para recomenda√ß√£o\n        if (!resp.erro) {\n          botResponse = `Recomendo a pizza de **${resp.pizza_recomendada}**!\\nMotivo: ${resp.motivo}\\nIngredientes: ${resp.ingredientes.join(', ')}.`;\n          // Bot√£o para adicionar a pizza recomendada\n          setMessages(prev => [\n            ...prev,\n            { id: Date.now() + 1, text: botResponse, type: 'bot', timestamp: new Date() },\n            { id: Date.now() + 2, type: 'action', options: [{ text: \"Adicionar ao Carrinho\", action: `adicionar_${resp.pizza_recomendada}` }], timestamp: new Date() }\n          ]);\n          botResponse = \"\"; // N√£o adicionar mensagem de texto novamente\n        } else {\n          botResponse = `Erro na recomenda√ß√£o: ${resp.detalhe}`;\n        }\n      } catch (e) {\n        botResponse = \"Erro ao se comunicar com o sistema de recomenda√ß√£o.\";\n      }\n    } else if (action.startsWith('adicionar_')) {\n        const nomePizza = action.replace('adicionar_', '');\n        const infoPizza = CARDAPIO[nomePizza as keyof typeof CARDAPIO];\n        if (infoPizza) {\n            setPizzaToAdd({ nome: nomePizza, preco: infoPizza.preco });\n            setExtrasSelecionados([]); // Limpa extras anteriores\n        } else {\n            botResponse = \"Erro: Pizza n√£o encontrada.\";\n        }\n    } else if (action === 'ver_carrinho') {\n        setShowCarrinho(true);\n        botResponse = \"\"; // O carrinho ser√° exibido separadamente\n    } else if (action === 'finalizar_pedido') {\n        if (carrinho.length === 0) {\n            botResponse = \"Seu carrinho est√° vazio. Adicione itens antes de finalizar.\";\n        } else {\n            try {\n                // --- AJUSTE: Itera sobre todos os itens do carrinho ---\n                for (const item of carrinho) {\n                    // --- CORRE√á√ÉO: Inclui nome_cliente e telefone_cliente ---\n                    const pedidoIndividual = {\n                        cliente_id: clienteInfo.id || 1, // Usar ID real do cliente quando dispon√≠vel\n                        nome_cliente: clienteInfo.nome, // <-- ADICIONADO\n                        telefone_cliente: clienteInfo.telefone, // <-- ADICIONADO\n                        pizza: item.nome,\n                        extras: item.extras\n                    };\n                    const resp = await salvarPedido(pedidoIndividual); // <-- Chamada com objeto correto\n                    if (!resp.sucesso) {\n                        throw new Error(`Erro ao confirmar pedido de ${item.nome}: ${resp.erro}`);\n                    }\n                    setMessages(prev => [...prev, { id: Date.now(), text: `‚úÖ Pedido de ${item.nome} confirmado!`, type: 'info', timestamp: new Date() }]);\n                }\n                botResponse = `‚úÖ Pedido com ${carrinho.length} itens confirmado! Total: R$ ${totalCarrinho.toFixed(2)}`;\n                // Limpa o carrinho\n                setCarrinho([]);\n                setShowCarrinho(false);\n                // --- ADICIONAR ESTA LINHA ---\n                // Adiciona mensagem com link do WhatsApp ao chat\n                setMessages(prev => [...prev, { id: Date.now() + 1000, text: \"Clique aqui para confirmar via WhatsApp\", type: 'info', timestamp: new Date() }]);\n                // -------------------------\n            } catch (e: any) {\n                botResponse = `Erro ao confirmar pedido: ${e.message || e}`;\n            }\n        }\n    } else if (action === 'ajuda') {\n      botResponse = \"Voc√™ pode me pedir para:\\n- Mostrar o card√°pio\\n- Fazer uma recomenda√ß√£o\\n- Ver ou finalizar seu pedido\\n- Digite o que deseja!\";\n    }\n\n    if (botResponse) {\n      setMessages(prev => [...prev, { id: Date.now() + 1, text: botResponse, type: 'bot', timestamp: new Date() }]);\n    }\n    setLoading(false);\n  };\n\n  // --- Fun√ß√£o para adicionar item ao carrinho ---\n  const handleAdicionarAoCarrinho = () => {\n    if (pizzaToAdd) {\n        const precoExtras = extrasSelecionados.reduce((sum, e) => sum + (EXTRAS[e as keyof typeof EXTRAS] || 0), 0);\n        const precoTotal = pizzaToAdd.preco + precoExtras;\n\n        const novoItem: CarrinhoItem = {\n            id: Date.now(), // ID √∫nico baseado em timestamp\n            nome: pizzaToAdd.nome,\n            precoBase: pizzaToAdd.preco,\n            extras: [...extrasSelecionados],\n            precoTotal: precoTotal\n        };\n\n        setCarrinho(prev => [...prev, novoItem]);\n        setPizzaToAdd(null); // Fecha o modal/√°rea de adi√ß√£o\n        setExtrasSelecionados([]); // Limpa extras selecionados\n        setMessages(prev => [...prev, { id: Date.now(), text: `‚úÖ ${pizzaToAdd.nome} adicionada ao carrinho!`, type: 'info', timestamp: new Date() }]);\n    }\n  };\n\n  // --- Fun√ß√£o para remover item do carrinho ---\n  const handleRemoverDoCarrinho = (id: number) => {\n    setCarrinho(prev => prev.filter(item => item.id !== id));\n  };\n\n  // --- Fun√ß√£o para lidar com o envio de mensagens ---\n  const handleSendMessage = async () => {\n    if (!inputText.trim()) return;\n\n    const userMessage: Message = { id: Date.now(), text: inputText, type: 'user', timestamp: new Date() };\n    setMessages(prev => [...prev, userMessage]);\n    setInputText('');\n    setLoading(true);\n\n    // --- L√≥gica de IA Simples ---\n    let botResponse = \"\";\n    const lowerText = inputText.toLowerCase();\n\n    if (showClienteForm) {\n      // Se ainda n√£o coletou info, ignora comandos e pede info\n      botResponse = \"Para continuar, por favor, preencha seu nome, telefone e endere√ßo.\";\n    } else if (lowerText.includes(\"ol√°\") || lowerText.includes(\"oi\") || lowerText.includes(\"bom dia\") || lowerText.includes(\"boa tarde\") || lowerText.includes(\"boa noite\")) {\n      botResponse = `Ol√° ${clienteInfo.nome}! üòä Como posso te ajudar?`;\n      // Adiciona op√ß√µes de a√ß√£o ap√≥s saudar\n      setMessages(prev => [\n        ...prev,\n        { id: Date.now() + 1, text: botResponse, type: 'bot', timestamp: new Date() },\n        { id: Date.now() + 2, type: 'action', options: [\n          { text: \"Ver Card√°pio\", action: 'ver_cardapio' },\n          { text: \"Receber Recomenda√ß√£o\", action: 'recomendar' },\n          { text: \"Ver Carrinho\", action: 'ver_carrinho' },\n          { text: \"Ajuda\", action: 'ajuda' }\n        ], timestamp: new Date() }\n      ]);\n      botResponse = \"\"; // N√£o adicionar mensagem de texto novamente\n    } else if (lowerText.includes(\"card√°pio\") || lowerText.includes(\"ver card√°pio\") || lowerText.includes(\"op√ß√µes\") || lowerText.includes(\"quais pizzas\") || lowerText.includes(\"o que voc√™s t√™m\")) {\n      // Exibe o card√°pio como mensagens separadas com bot√µes\n      botResponse = \"Claro! Aqui est√° nosso card√°pio. Clique em 'Adicionar ao Carrinho' para escolher uma pizza.\\n\\n\";\n      const cardapioMessages: Message[] = Object.entries(CARDAPIO).map(([nome, info], index) => ({\n        id: Date.now() + index,\n        type: 'cardapio',\n        timestamp: new Date(),\n        pizza: {\n          nome: nome,\n          ingredientes: info.ingredientes,\n          preco: info.preco\n        },\n        options: [{ text: \"Adicionar ao Carrinho\", action: `adicionar_${nome}` }] // Bot√£o para adicionar\n      }));\n      setMessages(prev => [...prev, { id: Date.now() + 1000, text: botResponse, type: 'bot', timestamp: new Date() }, ...cardapioMessages]);\n      botResponse = \"\"; // N√£o adicionar mensagem de texto novamente\n    } else if (lowerText.includes(\"recomendar\") || lowerText.includes(\"sugira\") || lowerText.includes(\"qual pizza\")) {\n      // Chama a API de recomenda√ß√£o\n      try {\n        const resp = await recomendarPizza(1); // Usa ID fixo ou gerado\n        if (!resp.erro) {\n          botResponse = `Recomendo a pizza de **${resp.pizza_recomendada}**!\\nMotivo: ${resp.motivo}\\nIngredientes: ${resp.ingredientes.join(', ')}.`;\n          // Bot√£o para adicionar a pizza recomendada\n          setMessages(prev => [\n            ...prev,\n            { id: Date.now() + 1, text: botResponse, type: 'bot', timestamp: new Date() },\n            { id: Date.now() + 2, type: 'action', options: [{ text: \"Adicionar ao Carrinho\", action: `adicionar_${resp.pizza_recomendada}` }], timestamp: new Date() }\n          ]);\n          botResponse = \"\"; // N√£o adicionar mensagem de texto novamente\n        } else {\n          botResponse = `Erro na recomenda√ß√£o: ${resp.detalhe}`;\n        }\n      } catch (e) {\n        botResponse = \"Erro ao se comunicar com o sistema de recomenda√ß√£o.\";\n      }\n    } else if (lowerText.includes(\"carrinho\") || lowerText.includes(\"ver carrinho\")) {\n        setShowCarrinho(true);\n        botResponse = \"\"; // O carrinho ser√° exibido separadamente\n    } else if (lowerText.includes(\"pedido\") || lowerText.includes(\"status\")) {\n      if (pedidoStatus) {\n        botResponse = pedidoStatus;\n      } else {\n        botResponse = \"Ainda n√£o h√° um pedido em andamento.\";\n      }\n    } else if (lowerText.includes(\"ajuda\")) {\n      botResponse = \"Voc√™ pode me pedir para:\\n- Mostrar o card√°pio\\n- Fazer uma recomenda√ß√£o\\n- Ver ou finalizar seu pedido\\n- Digite o que deseja!\";\n      // Adiciona op√ß√µes de a√ß√£o para facilitar\n      setMessages(prev => [\n        ...prev,\n        { id: Date.now() + 1, text: botResponse, type: 'bot', timestamp: new Date() },\n        { id: Date.now() + 2, type: 'action', options: [\n          { text: \"Ver Card√°pio\", action: 'ver_cardapio' },\n          { text: \"Receber Recomenda√ß√£o\", action: 'recomendar' },\n          { text: \"Ver Carrinho\", action: 'ver_carrinho' },\n          { text: \"Ajuda\", action: 'ajuda' }\n        ], timestamp: new Date() }\n      ]);\n      botResponse = \"\"; // N√£o adicionar mensagem de texto novamente\n    } else {\n      botResponse = \"Desculpe, n√£o entendi. Posso te ajudar com o card√°pio, uma recomenda√ß√£o, informa√ß√µes sobre seu pedido, ou digite 'ajuda' para ver comandos dispon√≠veis.\";\n      // Adiciona op√ß√µes de a√ß√£o para facilitar\n      setMessages(prev => [\n        ...prev,\n        { id: Date.now() + 1, text: botResponse, type: 'bot', timestamp: new Date() },\n        { id: Date.now() + 2, type: 'action', options: [\n          { text: \"Ver Card√°pio\", action: 'ver_cardapio' },\n          { text: \"Receber Recomenda√ß√£o\", action: 'recomendar' },\n          { text: \"Ver Carrinho\", action: 'ver_carrinho' },\n          { text: \"Ajuda\", action: 'ajuda' }\n        ], timestamp: new Date() }\n      ]);\n      botResponse = \"\"; // N√£o adicionar mensagem de texto novamente\n    }\n\n    if (botResponse) {\n      setMessages(prev => [...prev, { id: Date.now() + 1, text: botResponse, type: 'bot', timestamp: new Date() }]);\n    }\n    setLoading(false);\n  };\n\n  // --- Fun√ß√£o para lidar com o envio do formul√°rio de cliente ---\n  const handleClienteSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (clienteInfo.nome && clienteInfo.telefone && clienteInfo.endereco) {\n      // Gera um ID de cliente simples (em produ√ß√£o, viria do backend)\n      const novoClienteId = Date.now() % 10000;\n      setClienteInfo(prev => ({ ...prev, id: novoClienteId })); // <-- Atualiza o estado com o ID\n      setShowClienteForm(false);\n      setMessages(prev => [\n        ...prev,\n        { id: Date.now(), text: `Obrigado, ${clienteInfo.nome}! Seu ID √© ${novoClienteId}. Como posso te ajudar agora?`, type: 'bot', timestamp: new Date() },\n        { id: Date.now() + 1, type: 'action', options: [\n          { text: \"Ver Card√°pio\", action: 'ver_cardapio' },\n          { text: \"Receber Recomenda√ß√£o\", action: 'recomendar' },\n          { text: \"Ver Carrinho\", action: 'ver_carrinho' },\n          { text: \"Ajuda\", action: 'ajuda' }\n        ], timestamp: new Date() }\n      ]);\n    }\n  };\n\n  return (\n    <div style={styles.container}>\n      {/* Formul√°rio de Informa√ß√µes do Cliente */}\n      {showClienteForm && (\n        <form onSubmit={handleClienteSubmit} style={styles.clienteForm}>\n          <h4 style={styles.formTitle}>_infos do Cliente</h4>\n          <input\n            type=\"text\"\n            placeholder=\"Nome completo\"\n            value={clienteInfo.nome}\n            onChange={(e) => setClienteInfo({ ...clienteInfo, nome: e.target.value })}\n            style={styles.input}\n            required\n          />\n          <input\n            type=\"tel\"\n            placeholder=\"Telefone (ex: 11999999999)\"\n            value={clienteInfo.telefone}\n            onChange={(e) => setClienteInfo({ ...clienteInfo, telefone: e.target.value })}\n            style={styles.input}\n            required\n          />\n          <textarea\n            placeholder=\"Endere√ßo completo\"\n            value={clienteInfo.endereco}\n            onChange={(e) => setClienteInfo({ ...clienteInfo, endereco: e.target.value })}\n            style={{ ...styles.input, minHeight: '60px' }}\n            required\n          />\n          <button type=\"submit\" style={styles.confirmButton}>Enviar</button>\n        </form>\n      )}\n\n      {/* √Årea de Chat */}\n      {!showClienteForm && (\n        <>\n          <div style={styles.chatArea}>\n            {messages.map((msg) => (\n              <ChatMessage\n                key={msg.id}\n                message={msg}\n                onOptionClick={handleOptionClick}\n                clienteInfo={clienteInfo} // Passa o objeto clienteInfo como prop (ainda necess√°rio para a mensagem do WhatsApp)\n                // numeroTelefoneCliente={clienteInfo.telefone} // <-- COMENTADO: N√£o √© mais necess√°rio passar o n√∫mero do cliente\n              />\n            ))}\n            {loading && <div style={styles.loading}>Pizzaria IA est√° digitando...</div>}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Se√ß√£o do Carrinho (vis√≠vel quando showCarrinho √© true) */}\n          {showCarrinho && carrinho.length > 0 && (\n            <div style={styles.carrinhoArea}>\n              <h4 style={styles.carrinhoTitulo}>üõí Seu Carrinho</h4>\n              {carrinho.map(item => (\n                <div key={item.id} style={styles.itemCarrinho}>\n                  <div style={styles.itemInfo}>\n                    <strong>{item.nome}</strong>\n                    <br />\n                    <small>Pre√ßo Base: R$ {item.precoBase.toFixed(2)}</small>\n                    {item.extras.length > 0 && (\n                      <small><br />Extras: {item.extras.join(', ')} (+R$ {item.extras.reduce((sum, e) => sum + (EXTRAS[e as keyof typeof EXTRAS] || 0), 0).toFixed(2)})</small>\n                    )}\n                    <br />\n                    <strong>Total: R$ {item.precoTotal.toFixed(2)}</strong>\n                  </div>\n                  <button onClick={() => handleRemoverDoCarrinho(item.id)} style={styles.removerButton}>Remover</button>\n                </div>\n              ))}\n              <div style={styles.totalCarrinho}>\n                <strong>Total do Pedido: R$ {totalCarrinho.toFixed(2)}</strong>\n              </div>\n              <button onClick={() => handleOptionClick('finalizar_pedido')} style={styles.finalizarButton}>\n                Finalizar Pedido\n              </button>\n              <button onClick={() => setShowCarrinho(false)} style={styles.voltarButton}>\n                Continuar Comprando\n              </button>\n            </div>\n          )}\n\n          {/* Bot√£o para ver carrinho quando vazio ou oculto */}\n          {!showCarrinho && carrinho.length > 0 && (\n            <button onClick={() => setShowCarrinho(true)} style={styles.verCarrinhoButton}>\n              Ver Carrinho ({carrinho.length} itens) - R$ {totalCarrinho.toFixed(2)}\n            </button>\n          )}\n\n          {/* Modal para selecionar extras ao adicionar pizza */}\n          {pizzaToAdd && (\n            <div style={styles.modalOverlay}>\n              <div style={styles.modalContent}>\n                <h4>Adicionar ao Carrinho: {pizzaToAdd.nome}</h4>\n                <p>Pre√ßo Base: R$ {pizzaToAdd.preco.toFixed(2)}</p>\n                <div>\n                  <h5>Extras (opcional):</h5>\n                  {Object.entries(EXTRAS).map(([extra, preco]) => (\n                    <label key={extra} style={styles.extraLabel}>\n                      <input\n                        type=\"checkbox\"\n                        checked={extrasSelecionados.includes(extra)}\n                        onChange={(e) => {\n                          if (e.target.checked) {\n                            setExtrasSelecionados(prev => [...prev, extra]);\n                          } else {\n                            setExtrasSelecionados(prev => prev.filter(e => e !== extra));\n                          }\n                        }}\n                      /> {extra} (+R$ {preco.toFixed(2)})\n                    </label>\n                  ))}\n                </div>\n                <div style={styles.modalButtons}>\n                  <button onClick={() => setPizzaToAdd(null)} style={styles.cancelarButton}>Cancelar</button>\n                  <button onClick={handleAdicionarAoCarrinho} style={styles.adicionarButton}>Adicionar (R$ ${(pizzaToAdd.preco + extrasSelecionados.reduce((sum, e) => sum + (EXTRAS[e as keyof typeof EXTRAS] || 0), 0)).toFixed(2)})</button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Input de Mensagem */}\n          <div style={styles.inputArea}>\n            <input\n              type=\"text\"\n              value={inputText}\n              onChange={(e) => setInputText(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\n              placeholder=\"Digite sua mensagem...\"\n              style={styles.input}\n            />\n            <button onClick={handleSendMessage} style={styles.sendButton}>Enviar</button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\n// --- Componente para exibir uma mensagem no chat ---\nconst ChatMessage: React.FC<{ message: Message; onOptionClick: (action: string) => void; clienteInfo: { nome: string; telefone: string; endereco: string; id?: number } }> = ({ message, onOptionClick, clienteInfo }) => { // <-- Adicionado clienteInfo √†s props e desestruturado\n  const isUser = message.type === 'user';\n  const isPedido = message.type === 'pedido';\n  const isBot = message.type === 'bot';\n  const isInfo = message.type === 'info';\n  const isCardapio = message.type === 'cardapio';\n  const isAction = message.type === 'action';\n\n  let bgColor = '#f1f1f1';\n  let align = 'flex-start';\n  let fontWeight = 'normal';\n\n  if (isUser) {\n    bgColor = '#d32f2f';\n    align = 'flex-end';\n  } else if (isPedido) {\n    bgColor = '#4caf50';\n    fontWeight = 'bold';\n  } else if (isInfo) {\n    bgColor = '#2196f3';\n    fontWeight = 'bold';\n  } else if (isBot) {\n    bgColor = '#e0e0e0';\n  } else if (isCardapio) {\n    bgColor = '#fff3e0'; // Cor suave para itens do card√°pio\n    fontWeight = 'normal';\n  } else if (isAction) {\n    bgColor = 'transparent'; // Bot√µes de a√ß√£o\n    fontWeight = 'bold';\n  }\n\n  // --- Fun√ß√£o para lidar com o clique no link do WhatsApp ---\n  const handleCliqueWhatsApp = (numeroTelefone: string) => {\n    // Reaproveita a fun√ß√£o definida em PizzaRecommender ou move para um utilit√°rio\n    // Por simplicidade, redefinimos aqui.\n    const numeroLimpo = numeroTelefone.replace(/\\D/g, '');\n    let numeroFormatado = numeroLimpo;\n    if (numeroLimpo.length === 10) {\n        numeroFormatado = '55' + numeroLimpo.substring(0, 2) + '9' + numeroLimpo.substring(2);\n    } else if (numeroLimpo.length === 11) {\n        numeroFormatado = '55' + numeroLimpo;\n    } else {\n         console.error(\"N√∫mero de telefone inv√°lido ou incompleto para formato internacional.\", numeroLimpo);\n         // Opcional: Adicionar mensagem de erro ao chat aqui tamb√©m\n         return;\n    }\n    // --- Agora 'clienteInfo' est√° dispon√≠vel no escopo ---\n    const mensagem = `Ol√° ${encodeURIComponent(clienteInfo.nome)}, seu pedido est√° pronto! Por favor, confirme o recebimento ou avise se precisa cancelar.\\n\\n1. Confirmar Recebimento\\n2. Cancelar Pedido\\n\\nDigite \"CONFIRMAR\" ou \"CANCELAR\".`;\n    // ---\n    const mensagemCodificada = encodeURIComponent(mensagem);\n    const link = `https://wa.me/${numeroFormatado}?text=${mensagemCodificada}`;\n    if (link) {\n        window.open(link, '_blank');\n    }\n  };\n\n  if (isCardapio && message.pizza) {\n    return (\n      <div style={{ display: 'flex', justifyContent: align, marginBottom: '8px' }}>\n        <div\n          style={{\n            padding: '8px 12px',\n            borderRadius: '12px',\n            backgroundColor: bgColor,\n            color: 'black',\n            maxWidth: '80%',\n            wordWrap: 'break-word',\n            fontWeight: fontWeight,\n          }}\n        >\n          <strong>{message.pizza.nome}</strong> - R$ {message.pizza.preco.toFixed(2)}\n          <br />\n          <small>{message.pizza.ingredientes}</small>\n          {/* Bot√£o de a√ß√£o para adicionar ao carrinho */}\n          {message.options && message.options.length > 0 && (\n            <div style={{ marginTop: '4px' }}>\n              <button\n                onClick={() => onOptionClick(message.options![0].action)}\n                style={{\n                  padding: '4px 8px',\n                  borderRadius: '8px',\n                  border: '1px solid #d32f2f',\n                  backgroundColor: 'white',\n                  color: '#d32f2f',\n                  cursor: 'pointer',\n                  fontSize: '12px',\n                  marginTop: '4px'\n                }}\n              >\n                {message.options[0].text}\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  if (isAction && message.options) {\n    return (\n      <div style={{ display: 'flex', justifyContent: 'center', gap: '8px', marginBottom: '8px', flexWrap: 'wrap' as const }}>\n        {message.options.map((opt, index) => (\n          <button\n            key={index}\n            onClick={() => onOptionClick(opt.action)}\n            style={{\n              padding: '6px 12px',\n              borderRadius: '20px',\n              border: '1px solid #d32f2f',\n              backgroundColor: 'white',\n              color: '#d32f2f',\n              cursor: 'pointer',\n              fontSize: '14px',\n            }}\n          >\n            {opt.text}\n          </button>\n        ))}\n      </div>\n    );\n  }\n\n  // --- L√≥gica para renderizar mensagem com bot√£o do WhatsApp ---\n  let conteudoMensagem: React.ReactNode = message.text; // <-- Corre√ß√£o: Defina o tipo como React.ReactNode\n\n  if (isInfo && message.text === \"Clique aqui para confirmar via WhatsApp\") {\n    conteudoMensagem = ( // <-- Agora √© poss√≠vel atribuir um Element JSX\n      <button\n        onClick={() => handleCliqueWhatsApp(NUMERO_ATENDIMENTO)} // <-- Chama a fun√ß√£o ajustada (usa constante)\n        style={{\n          padding: '6px 12px',\n          borderRadius: '8px',\n          border: '1px solid #25D366',\n          backgroundColor: '#25D366',\n          color: 'white',\n          cursor: 'pointer',\n          fontSize: '14px',\n          fontWeight: 'normal' as const,\n        }}\n      >\n        üì≤ Confirmar via WhatsApp\n      </button>\n    );\n  }\n\n  return (\n    <div style={{ display: 'flex', justifyContent: align, marginBottom: '8px' }}>\n      <div\n        style={{\n          padding: '8px 12px',\n          borderRadius: '12px',\n          backgroundColor: bgColor,\n          color: isUser ? 'white' : 'black',\n          maxWidth: '80%',\n          wordWrap: 'break-word',\n          fontWeight: fontWeight,\n        }}\n      >\n        {conteudoMensagem} {/* <-- Agora o tipo React.ReactNode √© compat√≠vel */}\n      </div>\n    </div>\n  );\n};\n\n// --- Estilos CSS em JS ---\nconst styles = {\n  container: {\n    fontFamily: 'Arial, sans-serif',\n    padding: '16px',\n    maxWidth: '400px',\n    margin: '0 auto',\n    display: 'flex',\n    flexDirection: 'column' as const,\n    height: '70vh',\n    backgroundColor: '#fff',\n    borderRadius: '12px',\n    boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n    position: 'relative' as const, // Para o modal\n  },\n  clienteForm: {\n    display: 'flex',\n    flexDirection: 'column' as const,\n    gap: '8px',\n  },\n  formTitle: {\n    margin: '0 0 16px 0',\n    color: '#333',\n    fontSize: '18px',\n    fontWeight: 'bold' as const,\n  },\n  chatArea: {\n    flex: 1,\n    overflowY: 'auto' as const,\n    padding: '8px',\n    marginBottom: '8px',\n    backgroundColor: '#fafafa',\n    borderRadius: '8px',\n    border: '1px solid #eee',\n  },\n  carrinhoArea: {\n    padding: '12px',\n    backgroundColor: '#f9f9f9',\n    borderRadius: '8px',\n    border: '1px solid #ddd',\n    marginBottom: '8px',\n    maxHeight: '200px',\n    overflowY: 'auto' as const,\n  },\n  carrinhoTitulo: {\n    margin: '0 0 8px 0',\n    fontSize: '16px',\n    fontWeight: 'bold' as const,\n    color: '#333',\n  },\n  itemCarrinho: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: '6px 0',\n    borderBottom: '1px solid #eee',\n  },\n  itemInfo: {\n    flex: 1,\n    fontSize: '14px',\n  },\n  removerButton: {\n    padding: '4px 8px',\n    backgroundColor: '#f44336',\n    color: 'white',\n    border: 'none',\n    borderRadius: '4px',\n    cursor: 'pointer',\n    fontSize: '12px',\n  },\n  totalCarrinho: {\n    textAlign: 'right' as const,\n    padding: '8px 0',\n    fontWeight: 'bold' as const,\n    borderTop: '1px solid #ddd',\n    marginTop: '8px',\n  },\n  finalizarButton: {\n    width: '100%',\n    padding: '10px',\n    backgroundColor: '#4caf50',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    fontWeight: 'bold' as const,\n    marginTop: '8px',\n  },\n  voltarButton: {\n    width: '100%',\n    padding: '8px',\n    backgroundColor: '#e0e0e0',\n    color: 'black',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    marginTop: '4px',\n  },\n  verCarrinhoButton: {\n    width: '100%',\n    padding: '8px',\n    backgroundColor: '#ff9800',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    fontWeight: 'bold' as const,\n    marginBottom: '8px',\n  },\n  modalOverlay: {\n    position: 'absolute' as const,\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 10,\n  },\n  modalContent: {\n    backgroundColor: 'white',\n    padding: '16px',\n    borderRadius: '8px',\n    width: '90%',\n    maxWidth: '400px',\n  },\n  extraLabel: {\n    display: 'block' as const,\n    marginBottom: '4px',\n  },\n  modalButtons: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    marginTop: '12px',\n  },\n  cancelarButton: {\n    padding: '8px 16px',\n    backgroundColor: '#e0e0e0',\n    color: 'black',\n    border: 'none',\n    borderRadius: '4px',\n    cursor: 'pointer',\n  },\n  adicionarButton: {\n    padding: '8px 16px',\n    backgroundColor: '#4caf50',\n    color: 'white',\n    border: 'none',\n    borderRadius: '4px',\n    cursor: 'pointer',\n  },\n  inputArea: {\n    display: 'flex',\n    gap: '8px',\n  },\n  input: {\n    flex: 1,\n    padding: '10px',\n    borderRadius: '8px',\n    border: '1px solid #ccc',\n    fontSize: '16px',\n  },\n  confirmButton: {\n    padding: '10px',\n    background: '#4caf50',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    fontSize: '16px',\n    cursor: 'pointer',\n  },\n  sendButton: {\n    padding: '10px 15px',\n    background: '#d32f2f',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    fontSize: '16px',\n    cursor: 'pointer',\n  },\n  loading: {\n    textAlign: 'center' as const,\n    padding: '8px',\n    color: '#666',\n    fontStyle: 'italic',\n  },\n};\n\nexport default PizzaRecommender;"],"mappings":"uIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,eAAe,CAAEC,YAAY,KAAQ,iBAAiB,CAC/D,OAASC,QAAQ,CAAEC,MAAM,KAAQ,kBAAkB,CAEnD;AAaA;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBASA;AACA,KAAM,CAAAC,kBAAkB,CAAG,eAAe,CAAE;AAE5C,KAAM,CAAAC,gBAA0B,CAAGA,CAAA,GAAM,CACvC;AACA,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAK3C,CACDiB,IAAI,CAAE,EAAE,CACRC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACF,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CAE5D;AACA,KAAM,CAACsB,QAAQ,CAAEC,WAAW,CAAC,CAAGvB,QAAQ,CAAY,EAAE,CAAC,CACvD,KAAM,CAACwB,SAAS,CAAEC,YAAY,CAAC,CAAGzB,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC0B,OAAO,CAAEC,UAAU,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC4B,YAAY,CAAEC,eAAe,CAAC,CAAG7B,QAAQ,CAAgB,IAAI,CAAC,CAErE;AACA,KAAM,CAAC8B,QAAQ,CAAEC,WAAW,CAAC,CAAG/B,QAAQ,CAAiB,EAAE,CAAC,CAC5D,KAAM,CAACgC,YAAY,CAAEC,eAAe,CAAC,CAAGjC,QAAQ,CAAC,KAAK,CAAC,CAAE;AAEzD;AACA,KAAM,CAACkC,UAAU,CAAEC,aAAa,CAAC,CAAGnC,QAAQ,CAAyC,IAAI,CAAC,CAC1F,KAAM,CAACoC,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGrC,QAAQ,CAAW,EAAE,CAAC,CAE1E;AACA,KAAM,CAAAsC,cAAc,CAAGpC,MAAM,CAAwB,IAAI,CAAC,CAE1D;AACA,KAAM,CAAAqC,cAAc,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CAC3B,CAAAA,qBAAA,CAAAF,cAAc,CAACG,OAAO,UAAAD,qBAAA,iBAAtBA,qBAAA,CAAwBE,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAChE,CAAC,CAED1C,SAAS,CAAC,IAAM,CACd;AACAsB,WAAW,CAAC,CACV,CAAEqB,EAAE,CAAE,CAAC,CAAEC,IAAI,CAAE,8FAA8F,CAAEC,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CACpJ,CAAC,CACFT,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAENtC,SAAS,CAAC,IAAM,CACdsC,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAACjB,QAAQ,CAAC,CAAC,CAEd;AACA,KAAM,CAAA2B,aAAa,CAAGnB,QAAQ,CAACoB,MAAM,CAAC,CAACC,GAAG,CAAEC,IAAI,GAAKD,GAAG,CAAGC,IAAI,CAACC,UAAU,CAAE,CAAC,CAAC,CAE9E;AACA,KAAM,CAAAC,mBAAmB,CAAIV,EAAU,EAAK,CAC1C,KAAM,CAAAW,MAAM,CAAG,YAAAC,MAAA,CACFZ,EAAE,kDAAAY,MAAA,CACFZ,EAAE,qCAAAY,MAAA,CACFZ,EAAE,0BACd,CACD,GAAI,CAAAa,CAAC,CAAG,CAAC,CACT,KAAM,CAAAC,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjC,GAAIF,CAAC,CAAGF,MAAM,CAACK,MAAM,CAAE,CACrBrC,WAAW,CAACsC,IAAI,EAAI,CAClB,GAAGA,IAAI,CACP,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAGL,CAAC,CAAEZ,IAAI,CAAEU,MAAM,CAACE,CAAC,CAAC,CAAEX,IAAI,CAAE,QAAQ,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC/E,CAAC,CACFS,CAAC,EAAE,CACL,CAAC,IAAM,CACLM,aAAa,CAACL,QAAQ,CAAC,CACzB,CACF,CAAC,CAAE,IAAI,CAAC,CAAE;AACZ,CAAC,CAED;AACA,KAAM,CAAAM,iBAAiB,CAAG,KAAO,CAAAC,MAAc,EAAK,CAClDtC,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAuC,WAAoB,CAAG,CAAEtB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAEjB,IAAI,CAAEoB,MAAM,CAAEnB,IAAI,CAAE,MAAM,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAClGzB,WAAW,CAACsC,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEK,WAAW,CAAC,CAAC,CAE3C,GAAI,CAAAC,WAAW,CAAG,EAAE,CACpB,GAAIF,MAAM,GAAK,cAAc,CAAE,CAC7BE,WAAW,CAAG,iGAAiG,CAC/G,KAAM,CAAAC,gBAA2B,CAAGC,MAAM,CAACC,OAAO,CAACjE,QAAQ,CAAC,CAACkE,GAAG,CAAC,CAAAC,IAAA,CAAeC,KAAK,OAAnB,CAACxD,IAAI,CAAEyD,IAAI,CAAC,CAAAF,IAAA,OAAa,CACzF5B,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAGW,KAAK,CACtB3B,IAAI,CAAE,UAAU,CAChBC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CACrB2B,KAAK,CAAE,CACL1D,IAAI,CAAEA,IAAI,CACV2D,YAAY,CAAEF,IAAI,CAACE,YAAY,CAC/BC,KAAK,CAAEH,IAAI,CAACG,KACd,CAAC,CACDC,OAAO,CAAE,CAAC,CAAEjC,IAAI,CAAE,uBAAuB,CAAEoB,MAAM,cAAAT,MAAA,CAAevC,IAAI,CAAG,CAAC,CAAE;AAC5E,CAAC,EAAC,CAAC,CACHM,WAAW,CAACsC,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,IAAI,CAAEjB,IAAI,CAAEsB,WAAW,CAAErB,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAAE,GAAGoB,gBAAgB,CAAC,CAAC,CACrID,WAAW,CAAG,EAAE,CAAE;AACpB,CAAC,IAAM,IAAIF,MAAM,GAAK,YAAY,CAAE,CAClC,GAAI,CACF,KAAM,CAAAc,IAAI,CAAG,KAAM,CAAA5E,eAAe,CAAC,CAAC,CAAC,CAAE;AACvC,GAAI,CAAC4E,IAAI,CAACC,IAAI,CAAE,CACdb,WAAW,2BAAAX,MAAA,CAA6BuB,IAAI,CAACE,iBAAiB,kBAAAzB,MAAA,CAAgBuB,IAAI,CAACG,MAAM,qBAAA1B,MAAA,CAAmBuB,IAAI,CAACH,YAAY,CAACO,IAAI,CAAC,IAAI,CAAC,KAAG,CAC3I;AACA5D,WAAW,CAACsC,IAAI,EAAI,CAClB,GAAGA,IAAI,CACP,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEjB,IAAI,CAAEsB,WAAW,CAAErB,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC7E,CAAEJ,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEhB,IAAI,CAAE,QAAQ,CAAEgC,OAAO,CAAE,CAAC,CAAEjC,IAAI,CAAE,uBAAuB,CAAEoB,MAAM,cAAAT,MAAA,CAAeuB,IAAI,CAACE,iBAAiB,CAAG,CAAC,CAAC,CAAElC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC3J,CAAC,CACFmB,WAAW,CAAG,EAAE,CAAE;AACpB,CAAC,IAAM,CACLA,WAAW,gCAAAX,MAAA,CAA4BuB,IAAI,CAACK,OAAO,CAAE,CACvD,CACF,CAAE,MAAOC,CAAC,CAAE,CACVlB,WAAW,CAAG,qDAAqD,CACrE,CACF,CAAC,IAAM,IAAIF,MAAM,CAACqB,UAAU,CAAC,YAAY,CAAC,CAAE,CACxC,KAAM,CAAAC,SAAS,CAAGtB,MAAM,CAACuB,OAAO,CAAC,YAAY,CAAE,EAAE,CAAC,CAClD,KAAM,CAAAC,SAAS,CAAGpF,QAAQ,CAACkF,SAAS,CAA0B,CAC9D,GAAIE,SAAS,CAAE,CACXtD,aAAa,CAAC,CAAElB,IAAI,CAAEsE,SAAS,CAAEV,KAAK,CAAEY,SAAS,CAACZ,KAAM,CAAC,CAAC,CAC1DxC,qBAAqB,CAAC,EAAE,CAAC,CAAE;AAC/B,CAAC,IAAM,CACH8B,WAAW,CAAG,6BAA6B,CAC/C,CACJ,CAAC,IAAM,IAAIF,MAAM,GAAK,cAAc,CAAE,CAClChC,eAAe,CAAC,IAAI,CAAC,CACrBkC,WAAW,CAAG,EAAE,CAAE;AACtB,CAAC,IAAM,IAAIF,MAAM,GAAK,kBAAkB,CAAE,CACtC,GAAInC,QAAQ,CAAC8B,MAAM,GAAK,CAAC,CAAE,CACvBO,WAAW,CAAG,6DAA6D,CAC/E,CAAC,IAAM,CACH,GAAI,CACA;AACA,IAAK,KAAM,CAAAf,IAAI,GAAI,CAAAtB,QAAQ,CAAE,CACzB;AACA,KAAM,CAAA4D,gBAAgB,CAAG,CACrBC,UAAU,CAAE5E,WAAW,CAAC6B,EAAE,EAAI,CAAC,CAAE;AACjCgD,YAAY,CAAE7E,WAAW,CAACE,IAAI,CAAE;AAChC4E,gBAAgB,CAAE9E,WAAW,CAACG,QAAQ,CAAE;AACxCyD,KAAK,CAAEvB,IAAI,CAACnC,IAAI,CAChB6E,MAAM,CAAE1C,IAAI,CAAC0C,MACjB,CAAC,CACD,KAAM,CAAAf,IAAI,CAAG,KAAM,CAAA3E,YAAY,CAACsF,gBAAgB,CAAC,CAAE;AACnD,GAAI,CAACX,IAAI,CAACgB,OAAO,CAAE,CACf,KAAM,IAAI,CAAAC,KAAK,gCAAAxC,MAAA,CAAgCJ,IAAI,CAACnC,IAAI,OAAAuC,MAAA,CAAKuB,IAAI,CAACC,IAAI,CAAE,CAAC,CAC7E,CACAzD,WAAW,CAACsC,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAEjB,IAAI,qBAAAW,MAAA,CAAiBJ,IAAI,CAACnC,IAAI,gBAAc,CAAE6B,IAAI,CAAE,MAAM,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAAC,CAAC,CACzI,CACAmB,WAAW,sBAAAX,MAAA,CAAmB1B,QAAQ,CAAC8B,MAAM,kCAAAJ,MAAA,CAAgCP,aAAa,CAACgD,OAAO,CAAC,CAAC,CAAC,CAAE,CACvG;AACAlE,WAAW,CAAC,EAAE,CAAC,CACfE,eAAe,CAAC,KAAK,CAAC,CACtB;AACA;AACAV,WAAW,CAACsC,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,IAAI,CAAEjB,IAAI,CAAE,yCAAyC,CAAEC,IAAI,CAAE,MAAM,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAAC,CAAC,CAC/I;AACJ,CAAE,MAAOqC,CAAM,CAAE,CACblB,WAAW,8BAAAX,MAAA,CAAgC6B,CAAC,CAACa,OAAO,EAAIb,CAAC,CAAE,CAC/D,CACJ,CACJ,CAAC,IAAM,IAAIpB,MAAM,GAAK,OAAO,CAAE,CAC7BE,WAAW,CAAG,iIAAiI,CACjJ,CAEA,GAAIA,WAAW,CAAE,CACf5C,WAAW,CAACsC,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEjB,IAAI,CAAEsB,WAAW,CAAErB,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAAC,CAAC,CAC/G,CACArB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED;AACA,KAAM,CAAAwE,yBAAyB,CAAGA,CAAA,GAAM,CACtC,GAAIjE,UAAU,CAAE,CACZ,KAAM,CAAAkE,WAAW,CAAGhE,kBAAkB,CAACc,MAAM,CAAC,CAACC,GAAG,CAAEkC,CAAC,GAAKlC,GAAG,EAAI7C,MAAM,CAAC+E,CAAC,CAAwB,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CAC3G,KAAM,CAAAhC,UAAU,CAAGnB,UAAU,CAAC2C,KAAK,CAAGuB,WAAW,CAEjD,KAAM,CAAAC,QAAsB,CAAG,CAC3BzD,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAE;AAChB7C,IAAI,CAAEiB,UAAU,CAACjB,IAAI,CACrBqF,SAAS,CAAEpE,UAAU,CAAC2C,KAAK,CAC3BiB,MAAM,CAAE,CAAC,GAAG1D,kBAAkB,CAAC,CAC/BiB,UAAU,CAAEA,UAChB,CAAC,CAEDtB,WAAW,CAAC8B,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEwC,QAAQ,CAAC,CAAC,CACxClE,aAAa,CAAC,IAAI,CAAC,CAAE;AACrBE,qBAAqB,CAAC,EAAE,CAAC,CAAE;AAC3Bd,WAAW,CAACsC,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAEjB,IAAI,WAAAW,MAAA,CAAOtB,UAAU,CAACjB,IAAI,4BAA0B,CAAE6B,IAAI,CAAE,MAAM,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAAC,CAAC,CACjJ,CACF,CAAC,CAED;AACA,KAAM,CAAAuD,uBAAuB,CAAI3D,EAAU,EAAK,CAC9Cb,WAAW,CAAC8B,IAAI,EAAIA,IAAI,CAAC2C,MAAM,CAACpD,IAAI,EAAIA,IAAI,CAACR,EAAE,GAAKA,EAAE,CAAC,CAAC,CAC1D,CAAC,CAED;AACA,KAAM,CAAA6D,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CAACjF,SAAS,CAACkF,IAAI,CAAC,CAAC,CAAE,OAEvB,KAAM,CAAAxC,WAAoB,CAAG,CAAEtB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAEjB,IAAI,CAAErB,SAAS,CAAEsB,IAAI,CAAE,MAAM,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CACrGzB,WAAW,CAACsC,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEK,WAAW,CAAC,CAAC,CAC3CzC,YAAY,CAAC,EAAE,CAAC,CAChBE,UAAU,CAAC,IAAI,CAAC,CAEhB;AACA,GAAI,CAAAwC,WAAW,CAAG,EAAE,CACpB,KAAM,CAAAwC,SAAS,CAAGnF,SAAS,CAACoF,WAAW,CAAC,CAAC,CAEzC,GAAIxF,eAAe,CAAE,CACnB;AACA+C,WAAW,CAAG,oEAAoE,CACpF,CAAC,IAAM,IAAIwC,SAAS,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,IAAI,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,SAAS,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,WAAW,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,WAAW,CAAC,CAAE,CACvK1C,WAAW,WAAAX,MAAA,CAAUzC,WAAW,CAACE,IAAI,wCAA4B,CACjE;AACAM,WAAW,CAACsC,IAAI,EAAI,CAClB,GAAGA,IAAI,CACP,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEjB,IAAI,CAAEsB,WAAW,CAAErB,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC7E,CAAEJ,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEhB,IAAI,CAAE,QAAQ,CAAEgC,OAAO,CAAE,CAC7C,CAAEjC,IAAI,CAAE,cAAc,CAAEoB,MAAM,CAAE,cAAe,CAAC,CAChD,CAAEpB,IAAI,CAAE,sBAAsB,CAAEoB,MAAM,CAAE,YAAa,CAAC,CACtD,CAAEpB,IAAI,CAAE,cAAc,CAAEoB,MAAM,CAAE,cAAe,CAAC,CAChD,CAAEpB,IAAI,CAAE,OAAO,CAAEoB,MAAM,CAAE,OAAQ,CAAC,CACnC,CAAElB,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC3B,CAAC,CACFmB,WAAW,CAAG,EAAE,CAAE;AACpB,CAAC,IAAM,IAAIwC,SAAS,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,cAAc,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,QAAQ,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,cAAc,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,iBAAiB,CAAC,CAAE,CAC9L;AACA1C,WAAW,CAAG,iGAAiG,CAC/G,KAAM,CAAAC,gBAA2B,CAAGC,MAAM,CAACC,OAAO,CAACjE,QAAQ,CAAC,CAACkE,GAAG,CAAC,CAAAuC,KAAA,CAAerC,KAAK,OAAnB,CAACxD,IAAI,CAAEyD,IAAI,CAAC,CAAAoC,KAAA,OAAa,CACzFlE,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAGW,KAAK,CACtB3B,IAAI,CAAE,UAAU,CAChBC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CACrB2B,KAAK,CAAE,CACL1D,IAAI,CAAEA,IAAI,CACV2D,YAAY,CAAEF,IAAI,CAACE,YAAY,CAC/BC,KAAK,CAAEH,IAAI,CAACG,KACd,CAAC,CACDC,OAAO,CAAE,CAAC,CAAEjC,IAAI,CAAE,uBAAuB,CAAEoB,MAAM,cAAAT,MAAA,CAAevC,IAAI,CAAG,CAAC,CAAE;AAC5E,CAAC,EAAC,CAAC,CACHM,WAAW,CAACsC,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,IAAI,CAAEjB,IAAI,CAAEsB,WAAW,CAAErB,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAAE,GAAGoB,gBAAgB,CAAC,CAAC,CACrID,WAAW,CAAG,EAAE,CAAE;AACpB,CAAC,IAAM,IAAIwC,SAAS,CAACE,QAAQ,CAAC,YAAY,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,QAAQ,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,YAAY,CAAC,CAAE,CAC/G;AACA,GAAI,CACF,KAAM,CAAA9B,IAAI,CAAG,KAAM,CAAA5E,eAAe,CAAC,CAAC,CAAC,CAAE;AACvC,GAAI,CAAC4E,IAAI,CAACC,IAAI,CAAE,CACdb,WAAW,2BAAAX,MAAA,CAA6BuB,IAAI,CAACE,iBAAiB,kBAAAzB,MAAA,CAAgBuB,IAAI,CAACG,MAAM,qBAAA1B,MAAA,CAAmBuB,IAAI,CAACH,YAAY,CAACO,IAAI,CAAC,IAAI,CAAC,KAAG,CAC3I;AACA5D,WAAW,CAACsC,IAAI,EAAI,CAClB,GAAGA,IAAI,CACP,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEjB,IAAI,CAAEsB,WAAW,CAAErB,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC7E,CAAEJ,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEhB,IAAI,CAAE,QAAQ,CAAEgC,OAAO,CAAE,CAAC,CAAEjC,IAAI,CAAE,uBAAuB,CAAEoB,MAAM,cAAAT,MAAA,CAAeuB,IAAI,CAACE,iBAAiB,CAAG,CAAC,CAAC,CAAElC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC3J,CAAC,CACFmB,WAAW,CAAG,EAAE,CAAE;AACpB,CAAC,IAAM,CACLA,WAAW,gCAAAX,MAAA,CAA4BuB,IAAI,CAACK,OAAO,CAAE,CACvD,CACF,CAAE,MAAOC,CAAC,CAAE,CACVlB,WAAW,CAAG,qDAAqD,CACrE,CACF,CAAC,IAAM,IAAIwC,SAAS,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,cAAc,CAAC,CAAE,CAC7E5E,eAAe,CAAC,IAAI,CAAC,CACrBkC,WAAW,CAAG,EAAE,CAAE;AACtB,CAAC,IAAM,IAAIwC,SAAS,CAACE,QAAQ,CAAC,QAAQ,CAAC,EAAIF,SAAS,CAACE,QAAQ,CAAC,QAAQ,CAAC,CAAE,CACvE,GAAIjF,YAAY,CAAE,CAChBuC,WAAW,CAAGvC,YAAY,CAC5B,CAAC,IAAM,CACLuC,WAAW,CAAG,sCAAsC,CACtD,CACF,CAAC,IAAM,IAAIwC,SAAS,CAACE,QAAQ,CAAC,OAAO,CAAC,CAAE,CACtC1C,WAAW,CAAG,iIAAiI,CAC/I;AACA5C,WAAW,CAACsC,IAAI,EAAI,CAClB,GAAGA,IAAI,CACP,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEjB,IAAI,CAAEsB,WAAW,CAAErB,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC7E,CAAEJ,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEhB,IAAI,CAAE,QAAQ,CAAEgC,OAAO,CAAE,CAC7C,CAAEjC,IAAI,CAAE,cAAc,CAAEoB,MAAM,CAAE,cAAe,CAAC,CAChD,CAAEpB,IAAI,CAAE,sBAAsB,CAAEoB,MAAM,CAAE,YAAa,CAAC,CACtD,CAAEpB,IAAI,CAAE,cAAc,CAAEoB,MAAM,CAAE,cAAe,CAAC,CAChD,CAAEpB,IAAI,CAAE,OAAO,CAAEoB,MAAM,CAAE,OAAQ,CAAC,CACnC,CAAElB,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC3B,CAAC,CACFmB,WAAW,CAAG,EAAE,CAAE;AACpB,CAAC,IAAM,CACLA,WAAW,CAAG,yJAAyJ,CACvK;AACA5C,WAAW,CAACsC,IAAI,EAAI,CAClB,GAAGA,IAAI,CACP,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEjB,IAAI,CAAEsB,WAAW,CAAErB,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC7E,CAAEJ,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEhB,IAAI,CAAE,QAAQ,CAAEgC,OAAO,CAAE,CAC7C,CAAEjC,IAAI,CAAE,cAAc,CAAEoB,MAAM,CAAE,cAAe,CAAC,CAChD,CAAEpB,IAAI,CAAE,sBAAsB,CAAEoB,MAAM,CAAE,YAAa,CAAC,CACtD,CAAEpB,IAAI,CAAE,cAAc,CAAEoB,MAAM,CAAE,cAAe,CAAC,CAChD,CAAEpB,IAAI,CAAE,OAAO,CAAEoB,MAAM,CAAE,OAAQ,CAAC,CACnC,CAAElB,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC3B,CAAC,CACFmB,WAAW,CAAG,EAAE,CAAE;AACpB,CAEA,GAAIA,WAAW,CAAE,CACf5C,WAAW,CAACsC,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEjB,IAAI,CAAEsB,WAAW,CAAErB,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAAC,CAAC,CAC/G,CACArB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED;AACA,KAAM,CAAAoF,mBAAmB,CAAI1B,CAAkB,EAAK,CAClDA,CAAC,CAAC2B,cAAc,CAAC,CAAC,CAClB,GAAIjG,WAAW,CAACE,IAAI,EAAIF,WAAW,CAACG,QAAQ,EAAIH,WAAW,CAACI,QAAQ,CAAE,CACpE;AACA,KAAM,CAAA8F,aAAa,CAAGjE,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,KAAK,CACxC9C,cAAc,CAAC6C,IAAI,EAAAqD,aAAA,CAAAA,aAAA,IAAUrD,IAAI,MAAEjB,EAAE,CAAEqE,aAAa,EAAG,CAAC,CAAE;AAC1D5F,kBAAkB,CAAC,KAAK,CAAC,CACzBE,WAAW,CAACsC,IAAI,EAAI,CAClB,GAAGA,IAAI,CACP,CAAEjB,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAEjB,IAAI,cAAAW,MAAA,CAAezC,WAAW,CAACE,IAAI,mBAAAuC,MAAA,CAAcyD,aAAa,iCAA+B,CAAEnE,IAAI,CAAE,KAAK,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CACrJ,CAAEJ,EAAE,CAAEI,IAAI,CAACc,GAAG,CAAC,CAAC,CAAG,CAAC,CAAEhB,IAAI,CAAE,QAAQ,CAAEgC,OAAO,CAAE,CAC7C,CAAEjC,IAAI,CAAE,cAAc,CAAEoB,MAAM,CAAE,cAAe,CAAC,CAChD,CAAEpB,IAAI,CAAE,sBAAsB,CAAEoB,MAAM,CAAE,YAAa,CAAC,CACtD,CAAEpB,IAAI,CAAE,cAAc,CAAEoB,MAAM,CAAE,cAAe,CAAC,CAChD,CAAEpB,IAAI,CAAE,OAAO,CAAEoB,MAAM,CAAE,OAAQ,CAAC,CACnC,CAAElB,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAC3B,CAAC,CACJ,CACF,CAAC,CAED,mBACEtC,KAAA,QAAKyG,KAAK,CAAEC,MAAM,CAACC,SAAU,CAAAC,QAAA,EAE1BlG,eAAe,eACdV,KAAA,SAAM6G,QAAQ,CAAER,mBAAoB,CAACI,KAAK,CAAEC,MAAM,CAACI,WAAY,CAAAF,QAAA,eAC7D9G,IAAA,OAAI2G,KAAK,CAAEC,MAAM,CAACK,SAAU,CAAAH,QAAA,CAAC,mBAAiB,CAAI,CAAC,cACnD9G,IAAA,UACEsC,IAAI,CAAC,MAAM,CACX4E,WAAW,CAAC,eAAe,CAC3BC,KAAK,CAAE5G,WAAW,CAACE,IAAK,CACxB2G,QAAQ,CAAGvC,CAAC,EAAKrE,cAAc,CAAAkG,aAAA,CAAAA,aAAA,IAAMnG,WAAW,MAAEE,IAAI,CAAEoE,CAAC,CAACwC,MAAM,CAACF,KAAK,EAAE,CAAE,CAC1ER,KAAK,CAAEC,MAAM,CAACU,KAAM,CACpBC,QAAQ,MACT,CAAC,cACFvH,IAAA,UACEsC,IAAI,CAAC,KAAK,CACV4E,WAAW,CAAC,4BAA4B,CACxCC,KAAK,CAAE5G,WAAW,CAACG,QAAS,CAC5B0G,QAAQ,CAAGvC,CAAC,EAAKrE,cAAc,CAAAkG,aAAA,CAAAA,aAAA,IAAMnG,WAAW,MAAEG,QAAQ,CAAEmE,CAAC,CAACwC,MAAM,CAACF,KAAK,EAAE,CAAE,CAC9ER,KAAK,CAAEC,MAAM,CAACU,KAAM,CACpBC,QAAQ,MACT,CAAC,cACFvH,IAAA,aACEkH,WAAW,CAAC,sBAAmB,CAC/BC,KAAK,CAAE5G,WAAW,CAACI,QAAS,CAC5ByG,QAAQ,CAAGvC,CAAC,EAAKrE,cAAc,CAAAkG,aAAA,CAAAA,aAAA,IAAMnG,WAAW,MAAEI,QAAQ,CAAEkE,CAAC,CAACwC,MAAM,CAACF,KAAK,EAAE,CAAE,CAC9ER,KAAK,CAAAD,aAAA,CAAAA,aAAA,IAAOE,MAAM,CAACU,KAAK,MAAEE,SAAS,CAAE,MAAM,EAAG,CAC9CD,QAAQ,MACT,CAAC,cACFvH,IAAA,WAAQsC,IAAI,CAAC,QAAQ,CAACqE,KAAK,CAAEC,MAAM,CAACa,aAAc,CAAAX,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC9D,CACP,CAGA,CAAClG,eAAe,eACfV,KAAA,CAAAE,SAAA,EAAA0G,QAAA,eACE5G,KAAA,QAAKyG,KAAK,CAAEC,MAAM,CAACc,QAAS,CAAAZ,QAAA,EACzBhG,QAAQ,CAACiD,GAAG,CAAE4D,GAAG,eAChB3H,IAAA,CAAC4H,WAAW,EAEVlC,OAAO,CAAEiC,GAAI,CACbE,aAAa,CAAErE,iBAAkB,CACjCjD,WAAW,CAAEA,WAAa;AAC1B;AAAA,EAJKoH,GAAG,CAACvF,EAKV,CACF,CAAC,CACDlB,OAAO,eAAIlB,IAAA,QAAK2G,KAAK,CAAEC,MAAM,CAAC1F,OAAQ,CAAA4F,QAAA,CAAC,kCAA6B,CAAK,CAAC,cAC3E9G,IAAA,QAAK8H,GAAG,CAAEhG,cAAe,CAAE,CAAC,EACzB,CAAC,CAGLN,YAAY,EAAIF,QAAQ,CAAC8B,MAAM,CAAG,CAAC,eAClClD,KAAA,QAAKyG,KAAK,CAAEC,MAAM,CAACmB,YAAa,CAAAjB,QAAA,eAC9B9G,IAAA,OAAI2G,KAAK,CAAEC,MAAM,CAACoB,cAAe,CAAAlB,QAAA,CAAC,2BAAe,CAAI,CAAC,CACrDxF,QAAQ,CAACyC,GAAG,CAACnB,IAAI,eAChB1C,KAAA,QAAmByG,KAAK,CAAEC,MAAM,CAACqB,YAAa,CAAAnB,QAAA,eAC5C5G,KAAA,QAAKyG,KAAK,CAAEC,MAAM,CAACsB,QAAS,CAAApB,QAAA,eAC1B9G,IAAA,WAAA8G,QAAA,CAASlE,IAAI,CAACnC,IAAI,CAAS,CAAC,cAC5BT,IAAA,QAAK,CAAC,cACNE,KAAA,UAAA4G,QAAA,EAAO,oBAAe,CAAClE,IAAI,CAACkD,SAAS,CAACL,OAAO,CAAC,CAAC,CAAC,EAAQ,CAAC,CACxD7C,IAAI,CAAC0C,MAAM,CAAClC,MAAM,CAAG,CAAC,eACrBlD,KAAA,UAAA4G,QAAA,eAAO9G,IAAA,QAAK,CAAC,WAAQ,CAAC4C,IAAI,CAAC0C,MAAM,CAACX,IAAI,CAAC,IAAI,CAAC,CAAC,QAAM,CAAC/B,IAAI,CAAC0C,MAAM,CAAC5C,MAAM,CAAC,CAACC,GAAG,CAAEkC,CAAC,GAAKlC,GAAG,EAAI7C,MAAM,CAAC+E,CAAC,CAAwB,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CAACY,OAAO,CAAC,CAAC,CAAC,CAAC,GAAC,EAAO,CACzJ,cACDzF,IAAA,QAAK,CAAC,cACNE,KAAA,WAAA4G,QAAA,EAAQ,YAAU,CAAClE,IAAI,CAACC,UAAU,CAAC4C,OAAO,CAAC,CAAC,CAAC,EAAS,CAAC,EACpD,CAAC,cACNzF,IAAA,WAAQmI,OAAO,CAAEA,CAAA,GAAMpC,uBAAuB,CAACnD,IAAI,CAACR,EAAE,CAAE,CAACuE,KAAK,CAAEC,MAAM,CAACwB,aAAc,CAAAtB,QAAA,CAAC,SAAO,CAAQ,CAAC,GAX9FlE,IAAI,CAACR,EAYV,CACN,CAAC,cACFpC,IAAA,QAAK2G,KAAK,CAAEC,MAAM,CAACnE,aAAc,CAAAqE,QAAA,cAC/B5G,KAAA,WAAA4G,QAAA,EAAQ,sBAAoB,CAACrE,aAAa,CAACgD,OAAO,CAAC,CAAC,CAAC,EAAS,CAAC,CAC5D,CAAC,cACNzF,IAAA,WAAQmI,OAAO,CAAEA,CAAA,GAAM3E,iBAAiB,CAAC,kBAAkB,CAAE,CAACmD,KAAK,CAAEC,MAAM,CAACyB,eAAgB,CAAAvB,QAAA,CAAC,kBAE7F,CAAQ,CAAC,cACT9G,IAAA,WAAQmI,OAAO,CAAEA,CAAA,GAAM1G,eAAe,CAAC,KAAK,CAAE,CAACkF,KAAK,CAAEC,MAAM,CAAC0B,YAAa,CAAAxB,QAAA,CAAC,qBAE3E,CAAQ,CAAC,EACN,CACN,CAGA,CAACtF,YAAY,EAAIF,QAAQ,CAAC8B,MAAM,CAAG,CAAC,eACnClD,KAAA,WAAQiI,OAAO,CAAEA,CAAA,GAAM1G,eAAe,CAAC,IAAI,CAAE,CAACkF,KAAK,CAAEC,MAAM,CAAC2B,iBAAkB,CAAAzB,QAAA,EAAC,gBAC/D,CAACxF,QAAQ,CAAC8B,MAAM,CAAC,eAAa,CAACX,aAAa,CAACgD,OAAO,CAAC,CAAC,CAAC,EAC/D,CACT,CAGA/D,UAAU,eACT1B,IAAA,QAAK2G,KAAK,CAAEC,MAAM,CAAC4B,YAAa,CAAA1B,QAAA,cAC9B5G,KAAA,QAAKyG,KAAK,CAAEC,MAAM,CAAC6B,YAAa,CAAA3B,QAAA,eAC9B5G,KAAA,OAAA4G,QAAA,EAAI,yBAAuB,CAACpF,UAAU,CAACjB,IAAI,EAAK,CAAC,cACjDP,KAAA,MAAA4G,QAAA,EAAG,oBAAe,CAACpF,UAAU,CAAC2C,KAAK,CAACoB,OAAO,CAAC,CAAC,CAAC,EAAI,CAAC,cACnDvF,KAAA,QAAA4G,QAAA,eACE9G,IAAA,OAAA8G,QAAA,CAAI,oBAAkB,CAAI,CAAC,CAC1BjD,MAAM,CAACC,OAAO,CAAChE,MAAM,CAAC,CAACiE,GAAG,CAAC2E,KAAA,MAAC,CAACC,KAAK,CAAEtE,KAAK,CAAC,CAAAqE,KAAA,oBACzCxI,KAAA,UAAmByG,KAAK,CAAEC,MAAM,CAACgC,UAAW,CAAA9B,QAAA,eAC1C9G,IAAA,UACEsC,IAAI,CAAC,UAAU,CACfuG,OAAO,CAAEjH,kBAAkB,CAACyE,QAAQ,CAACsC,KAAK,CAAE,CAC5CvB,QAAQ,CAAGvC,CAAC,EAAK,CACf,GAAIA,CAAC,CAACwC,MAAM,CAACwB,OAAO,CAAE,CACpBhH,qBAAqB,CAACwB,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEsF,KAAK,CAAC,CAAC,CACjD,CAAC,IAAM,CACL9G,qBAAqB,CAACwB,IAAI,EAAIA,IAAI,CAAC2C,MAAM,CAACnB,CAAC,EAAIA,CAAC,GAAK8D,KAAK,CAAC,CAAC,CAC9D,CACF,CAAE,CACH,CAAC,IAAC,CAACA,KAAK,CAAC,QAAM,CAACtE,KAAK,CAACoB,OAAO,CAAC,CAAC,CAAC,CAAC,GACpC,GAZYkD,KAYL,CAAC,EACT,CAAC,EACC,CAAC,cACNzI,KAAA,QAAKyG,KAAK,CAAEC,MAAM,CAACkC,YAAa,CAAAhC,QAAA,eAC9B9G,IAAA,WAAQmI,OAAO,CAAEA,CAAA,GAAMxG,aAAa,CAAC,IAAI,CAAE,CAACgF,KAAK,CAAEC,MAAM,CAACmC,cAAe,CAAAjC,QAAA,CAAC,UAAQ,CAAQ,CAAC,cAC3F5G,KAAA,WAAQiI,OAAO,CAAExC,yBAA0B,CAACgB,KAAK,CAAEC,MAAM,CAACoC,eAAgB,CAAAlC,QAAA,EAAC,iBAAe,CAAC,CAACpF,UAAU,CAAC2C,KAAK,CAAGzC,kBAAkB,CAACc,MAAM,CAAC,CAACC,GAAG,CAAEkC,CAAC,GAAKlC,GAAG,EAAI7C,MAAM,CAAC+E,CAAC,CAAwB,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,EAAEY,OAAO,CAAC,CAAC,CAAC,CAAC,GAAC,EAAQ,CAAC,EAC1N,CAAC,EACH,CAAC,CACH,CACN,cAGDvF,KAAA,QAAKyG,KAAK,CAAEC,MAAM,CAACqC,SAAU,CAAAnC,QAAA,eAC3B9G,IAAA,UACEsC,IAAI,CAAC,MAAM,CACX6E,KAAK,CAAEnG,SAAU,CACjBoG,QAAQ,CAAGvC,CAAC,EAAK5D,YAAY,CAAC4D,CAAC,CAACwC,MAAM,CAACF,KAAK,CAAE,CAC9C+B,UAAU,CAAGrE,CAAC,EAAKA,CAAC,CAACsE,GAAG,GAAK,OAAO,EAAIlD,iBAAiB,CAAC,CAAE,CAC5DiB,WAAW,CAAC,wBAAwB,CACpCP,KAAK,CAAEC,MAAM,CAACU,KAAM,CACrB,CAAC,cACFtH,IAAA,WAAQmI,OAAO,CAAElC,iBAAkB,CAACU,KAAK,CAAEC,MAAM,CAACwC,UAAW,CAAAtC,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC1E,CAAC,EACN,CACH,EACE,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAAc,WAAoK,CAAGyB,KAAA,EAA6C,IAA5C,CAAE3D,OAAO,CAAEmC,aAAa,CAAEtH,WAAY,CAAC,CAAA8I,KAAA,CAAO;AAC1N,KAAM,CAAAC,MAAM,CAAG5D,OAAO,CAACpD,IAAI,GAAK,MAAM,CACtC,KAAM,CAAAiH,QAAQ,CAAG7D,OAAO,CAACpD,IAAI,GAAK,QAAQ,CAC1C,KAAM,CAAAkH,KAAK,CAAG9D,OAAO,CAACpD,IAAI,GAAK,KAAK,CACpC,KAAM,CAAAmH,MAAM,CAAG/D,OAAO,CAACpD,IAAI,GAAK,MAAM,CACtC,KAAM,CAAAoH,UAAU,CAAGhE,OAAO,CAACpD,IAAI,GAAK,UAAU,CAC9C,KAAM,CAAAqH,QAAQ,CAAGjE,OAAO,CAACpD,IAAI,GAAK,QAAQ,CAE1C,GAAI,CAAAsH,OAAO,CAAG,SAAS,CACvB,GAAI,CAAAC,KAAK,CAAG,YAAY,CACxB,GAAI,CAAAC,UAAU,CAAG,QAAQ,CAEzB,GAAIR,MAAM,CAAE,CACVM,OAAO,CAAG,SAAS,CACnBC,KAAK,CAAG,UAAU,CACpB,CAAC,IAAM,IAAIN,QAAQ,CAAE,CACnBK,OAAO,CAAG,SAAS,CACnBE,UAAU,CAAG,MAAM,CACrB,CAAC,IAAM,IAAIL,MAAM,CAAE,CACjBG,OAAO,CAAG,SAAS,CACnBE,UAAU,CAAG,MAAM,CACrB,CAAC,IAAM,IAAIN,KAAK,CAAE,CAChBI,OAAO,CAAG,SAAS,CACrB,CAAC,IAAM,IAAIF,UAAU,CAAE,CACrBE,OAAO,CAAG,SAAS,CAAE;AACrBE,UAAU,CAAG,QAAQ,CACvB,CAAC,IAAM,IAAIH,QAAQ,CAAE,CACnBC,OAAO,CAAG,aAAa,CAAE;AACzBE,UAAU,CAAG,MAAM,CACrB,CAEA;AACA,KAAM,CAAAC,oBAAoB,CAAIC,cAAsB,EAAK,CACvD;AACA;AACA,KAAM,CAAAC,WAAW,CAAGD,cAAc,CAAChF,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CACrD,GAAI,CAAAkF,eAAe,CAAGD,WAAW,CACjC,GAAIA,WAAW,CAAC7G,MAAM,GAAK,EAAE,CAAE,CAC3B8G,eAAe,CAAG,IAAI,CAAGD,WAAW,CAACE,SAAS,CAAC,CAAC,CAAE,CAAC,CAAC,CAAG,GAAG,CAAGF,WAAW,CAACE,SAAS,CAAC,CAAC,CAAC,CACzF,CAAC,IAAM,IAAIF,WAAW,CAAC7G,MAAM,GAAK,EAAE,CAAE,CAClC8G,eAAe,CAAG,IAAI,CAAGD,WAAW,CACxC,CAAC,IAAM,CACFG,OAAO,CAACC,KAAK,CAAC,uEAAuE,CAAEJ,WAAW,CAAC,CACnG;AACA,OACL,CACA;AACA,KAAM,CAAAK,QAAQ,WAAAtH,MAAA,CAAUuH,kBAAkB,CAAChK,WAAW,CAACE,IAAI,CAAC,yLAAgL,CAC5O;AACA,KAAM,CAAA+J,kBAAkB,CAAGD,kBAAkB,CAACD,QAAQ,CAAC,CACvD,KAAM,CAAAG,IAAI,kBAAAzH,MAAA,CAAoBkH,eAAe,WAAAlH,MAAA,CAASwH,kBAAkB,CAAE,CAC1E,GAAIC,IAAI,CAAE,CACNC,MAAM,CAACC,IAAI,CAACF,IAAI,CAAE,QAAQ,CAAC,CAC/B,CACF,CAAC,CAED,GAAIf,UAAU,EAAIhE,OAAO,CAACvB,KAAK,CAAE,CAC/B,mBACEnE,IAAA,QAAK2G,KAAK,CAAE,CAAEiE,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAEhB,KAAK,CAAEiB,YAAY,CAAE,KAAM,CAAE,CAAAhE,QAAA,cAC1E5G,KAAA,QACEyG,KAAK,CAAE,CACLoE,OAAO,CAAE,UAAU,CACnBC,YAAY,CAAE,MAAM,CACpBC,eAAe,CAAErB,OAAO,CACxBsB,KAAK,CAAE,OAAO,CACdC,QAAQ,CAAE,KAAK,CACfC,QAAQ,CAAE,YAAY,CACtBtB,UAAU,CAAEA,UACd,CAAE,CAAAhD,QAAA,eAEF9G,IAAA,WAAA8G,QAAA,CAASpB,OAAO,CAACvB,KAAK,CAAC1D,IAAI,CAAS,CAAC,SAAM,CAACiF,OAAO,CAACvB,KAAK,CAACE,KAAK,CAACoB,OAAO,CAAC,CAAC,CAAC,cAC1EzF,IAAA,QAAK,CAAC,cACNA,IAAA,UAAA8G,QAAA,CAAQpB,OAAO,CAACvB,KAAK,CAACC,YAAY,CAAQ,CAAC,CAE1CsB,OAAO,CAACpB,OAAO,EAAIoB,OAAO,CAACpB,OAAO,CAAClB,MAAM,CAAG,CAAC,eAC5CpD,IAAA,QAAK2G,KAAK,CAAE,CAAE0E,SAAS,CAAE,KAAM,CAAE,CAAAvE,QAAA,cAC/B9G,IAAA,WACEmI,OAAO,CAAEA,CAAA,GAAMN,aAAa,CAACnC,OAAO,CAACpB,OAAO,CAAE,CAAC,CAAC,CAACb,MAAM,CAAE,CACzDkD,KAAK,CAAE,CACLoE,OAAO,CAAE,SAAS,CAClBC,YAAY,CAAE,KAAK,CACnBM,MAAM,CAAE,mBAAmB,CAC3BL,eAAe,CAAE,OAAO,CACxBC,KAAK,CAAE,SAAS,CAChBK,MAAM,CAAE,SAAS,CACjBC,QAAQ,CAAE,MAAM,CAChBH,SAAS,CAAE,KACb,CAAE,CAAAvE,QAAA,CAEDpB,OAAO,CAACpB,OAAO,CAAC,CAAC,CAAC,CAACjC,IAAI,CAClB,CAAC,CACN,CACN,EACE,CAAC,CACH,CAAC,CAEV,CAEA,GAAIsH,QAAQ,EAAIjE,OAAO,CAACpB,OAAO,CAAE,CAC/B,mBACEtE,IAAA,QAAK2G,KAAK,CAAE,CAAEiE,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEY,GAAG,CAAE,KAAK,CAAEX,YAAY,CAAE,KAAK,CAAEY,QAAQ,CAAE,MAAgB,CAAE,CAAA5E,QAAA,CACnHpB,OAAO,CAACpB,OAAO,CAACP,GAAG,CAAC,CAAC4H,GAAG,CAAE1H,KAAK,gBAC9BjE,IAAA,WAEEmI,OAAO,CAAEA,CAAA,GAAMN,aAAa,CAAC8D,GAAG,CAAClI,MAAM,CAAE,CACzCkD,KAAK,CAAE,CACLoE,OAAO,CAAE,UAAU,CACnBC,YAAY,CAAE,MAAM,CACpBM,MAAM,CAAE,mBAAmB,CAC3BL,eAAe,CAAE,OAAO,CACxBC,KAAK,CAAE,SAAS,CAChBK,MAAM,CAAE,SAAS,CACjBC,QAAQ,CAAE,MACZ,CAAE,CAAA1E,QAAA,CAED6E,GAAG,CAACtJ,IAAI,EAZJ4B,KAaC,CACT,CAAC,CACC,CAAC,CAEV,CAEA;AACA,GAAI,CAAA2H,gBAAiC,CAAGlG,OAAO,CAACrD,IAAI,CAAE;AAEtD,GAAIoH,MAAM,EAAI/D,OAAO,CAACrD,IAAI,GAAK,yCAAyC,CAAE,CACxEuJ,gBAAgB,cAAK;AACnB5L,IAAA,WACEmI,OAAO,CAAEA,CAAA,GAAM4B,oBAAoB,CAAC1J,kBAAkB,CAAG;AAAA,CACzDsG,KAAK,CAAE,CACLoE,OAAO,CAAE,UAAU,CACnBC,YAAY,CAAE,KAAK,CACnBM,MAAM,CAAE,mBAAmB,CAC3BL,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdK,MAAM,CAAE,SAAS,CACjBC,QAAQ,CAAE,MAAM,CAChB1B,UAAU,CAAE,QACd,CAAE,CAAAhD,QAAA,CACH,qCAED,CAAQ,CACT,CACH,CAEA,mBACE9G,IAAA,QAAK2G,KAAK,CAAE,CAAEiE,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAEhB,KAAK,CAAEiB,YAAY,CAAE,KAAM,CAAE,CAAAhE,QAAA,cAC1E5G,KAAA,QACEyG,KAAK,CAAE,CACLoE,OAAO,CAAE,UAAU,CACnBC,YAAY,CAAE,MAAM,CACpBC,eAAe,CAAErB,OAAO,CACxBsB,KAAK,CAAE5B,MAAM,CAAG,OAAO,CAAG,OAAO,CACjC6B,QAAQ,CAAE,KAAK,CACfC,QAAQ,CAAE,YAAY,CACtBtB,UAAU,CAAEA,UACd,CAAE,CAAAhD,QAAA,EAED8E,gBAAgB,CAAC,GAAC,EAChB,CAAC,CACH,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAAhF,MAAM,CAAG,CACbC,SAAS,CAAE,CACTgF,UAAU,CAAE,mBAAmB,CAC/Bd,OAAO,CAAE,MAAM,CACfI,QAAQ,CAAE,OAAO,CACjBW,MAAM,CAAE,QAAQ,CAChBlB,OAAO,CAAE,MAAM,CACfmB,aAAa,CAAE,QAAiB,CAChCC,MAAM,CAAE,MAAM,CACdf,eAAe,CAAE,MAAM,CACvBD,YAAY,CAAE,MAAM,CACpBiB,SAAS,CAAE,4BAA4B,CACvCC,QAAQ,CAAE,UAAqB;AACjC,CAAC,CACDlF,WAAW,CAAE,CACX4D,OAAO,CAAE,MAAM,CACfmB,aAAa,CAAE,QAAiB,CAChCN,GAAG,CAAE,KACP,CAAC,CACDxE,SAAS,CAAE,CACT6E,MAAM,CAAE,YAAY,CACpBZ,KAAK,CAAE,MAAM,CACbM,QAAQ,CAAE,MAAM,CAChB1B,UAAU,CAAE,MACd,CAAC,CACDpC,QAAQ,CAAE,CACRyE,IAAI,CAAE,CAAC,CACPC,SAAS,CAAE,MAAe,CAC1BrB,OAAO,CAAE,KAAK,CACdD,YAAY,CAAE,KAAK,CACnBG,eAAe,CAAE,SAAS,CAC1BD,YAAY,CAAE,KAAK,CACnBM,MAAM,CAAE,gBACV,CAAC,CACDvD,YAAY,CAAE,CACZgD,OAAO,CAAE,MAAM,CACfE,eAAe,CAAE,SAAS,CAC1BD,YAAY,CAAE,KAAK,CACnBM,MAAM,CAAE,gBAAgB,CACxBR,YAAY,CAAE,KAAK,CACnBuB,SAAS,CAAE,OAAO,CAClBD,SAAS,CAAE,MACb,CAAC,CACDpE,cAAc,CAAE,CACd8D,MAAM,CAAE,WAAW,CACnBN,QAAQ,CAAE,MAAM,CAChB1B,UAAU,CAAE,MAAe,CAC3BoB,KAAK,CAAE,MACT,CAAC,CACDjD,YAAY,CAAE,CACZ2C,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,eAAe,CAC/ByB,UAAU,CAAE,QAAQ,CACpBvB,OAAO,CAAE,OAAO,CAChBwB,YAAY,CAAE,gBAChB,CAAC,CACDrE,QAAQ,CAAE,CACRiE,IAAI,CAAE,CAAC,CACPX,QAAQ,CAAE,MACZ,CAAC,CACDpD,aAAa,CAAE,CACb2C,OAAO,CAAE,SAAS,CAClBE,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdN,YAAY,CAAE,KAAK,CACnBO,MAAM,CAAE,SAAS,CACjBC,QAAQ,CAAE,MACZ,CAAC,CACD/I,aAAa,CAAE,CACb+J,SAAS,CAAE,OAAgB,CAC3BzB,OAAO,CAAE,OAAO,CAChBjB,UAAU,CAAE,MAAe,CAC3B2C,SAAS,CAAE,gBAAgB,CAC3BpB,SAAS,CAAE,KACb,CAAC,CACDhD,eAAe,CAAE,CACfqE,KAAK,CAAE,MAAM,CACb3B,OAAO,CAAE,MAAM,CACfE,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdN,YAAY,CAAE,KAAK,CACnBO,MAAM,CAAE,SAAS,CACjBzB,UAAU,CAAE,MAAe,CAC3BuB,SAAS,CAAE,KACb,CAAC,CACD/C,YAAY,CAAE,CACZoE,KAAK,CAAE,MAAM,CACb3B,OAAO,CAAE,KAAK,CACdE,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdN,YAAY,CAAE,KAAK,CACnBO,MAAM,CAAE,SAAS,CACjBF,SAAS,CAAE,KACb,CAAC,CACD9C,iBAAiB,CAAE,CACjBmE,KAAK,CAAE,MAAM,CACb3B,OAAO,CAAE,KAAK,CACdE,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdN,YAAY,CAAE,KAAK,CACnBO,MAAM,CAAE,SAAS,CACjBzB,UAAU,CAAE,MAAe,CAC3BgB,YAAY,CAAE,KAChB,CAAC,CACDtC,YAAY,CAAE,CACZ0D,QAAQ,CAAE,UAAmB,CAC7BS,GAAG,CAAE,CAAC,CACNC,IAAI,CAAE,CAAC,CACPC,KAAK,CAAE,CAAC,CACRC,MAAM,CAAE,CAAC,CACT7B,eAAe,CAAE,iBAAiB,CAClCL,OAAO,CAAE,MAAM,CACf0B,UAAU,CAAE,QAAQ,CACpBzB,cAAc,CAAE,QAAQ,CACxBkC,MAAM,CAAE,EACV,CAAC,CACDtE,YAAY,CAAE,CACZwC,eAAe,CAAE,OAAO,CACxBF,OAAO,CAAE,MAAM,CACfC,YAAY,CAAE,KAAK,CACnB0B,KAAK,CAAE,KAAK,CACZvB,QAAQ,CAAE,OACZ,CAAC,CACDvC,UAAU,CAAE,CACVgC,OAAO,CAAE,OAAgB,CACzBE,YAAY,CAAE,KAChB,CAAC,CACDhC,YAAY,CAAE,CACZ8B,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,eAAe,CAC/BQ,SAAS,CAAE,MACb,CAAC,CACDtC,cAAc,CAAE,CACdgC,OAAO,CAAE,UAAU,CACnBE,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdN,YAAY,CAAE,KAAK,CACnBO,MAAM,CAAE,SACV,CAAC,CACDvC,eAAe,CAAE,CACf+B,OAAO,CAAE,UAAU,CACnBE,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdN,YAAY,CAAE,KAAK,CACnBO,MAAM,CAAE,SACV,CAAC,CACDtC,SAAS,CAAE,CACT2B,OAAO,CAAE,MAAM,CACfa,GAAG,CAAE,KACP,CAAC,CACDnE,KAAK,CAAE,CACL6E,IAAI,CAAE,CAAC,CACPpB,OAAO,CAAE,MAAM,CACfC,YAAY,CAAE,KAAK,CACnBM,MAAM,CAAE,gBAAgB,CACxBE,QAAQ,CAAE,MACZ,CAAC,CACD/D,aAAa,CAAE,CACbsD,OAAO,CAAE,MAAM,CACfiC,UAAU,CAAE,SAAS,CACrB9B,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdN,YAAY,CAAE,KAAK,CACnBQ,QAAQ,CAAE,MAAM,CAChBD,MAAM,CAAE,SACV,CAAC,CACDnC,UAAU,CAAE,CACV2B,OAAO,CAAE,WAAW,CACpBiC,UAAU,CAAE,SAAS,CACrB9B,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdN,YAAY,CAAE,KAAK,CACnBQ,QAAQ,CAAE,MAAM,CAChBD,MAAM,CAAE,SACV,CAAC,CACDrK,OAAO,CAAE,CACPsL,SAAS,CAAE,QAAiB,CAC5BzB,OAAO,CAAE,KAAK,CACdG,KAAK,CAAE,MAAM,CACb+B,SAAS,CAAE,QACb,CACF,CAAC,CAED,cAAe,CAAA3M,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}